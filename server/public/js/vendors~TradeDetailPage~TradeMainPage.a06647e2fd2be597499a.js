(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{518:function(t,i,n){"use strict";var e={allowDownsampling:!0};var s,r,h,o=function(){function t(t,i){var n=this;this._resolutionMediaQueryList=null,this._resolutionListener=function(t){return n._onResolutionChanged()},this._canvasConfiguredListeners=[],this.canvas=t,this._canvasSize={width:this.canvas.clientWidth,height:this.canvas.clientHeight},this._options=i,this._configureCanvas(),this._installResolutionListener()}return t.prototype.destroy=function(){this._canvasConfiguredListeners.length=0,this._uninstallResolutionListener(),this.canvas=null},Object.defineProperty(t.prototype,"canvasSize",{get:function(){return{width:this._canvasSize.width,height:this._canvasSize.height}},enumerable:!0,configurable:!0}),t.prototype.resizeCanvas=function(t){this._canvasSize={width:t.width,height:t.height},this._configureCanvas()},Object.defineProperty(t.prototype,"pixelRatio",{get:function(){var t=this.canvas.ownerDocument.defaultView;if(null==t)throw new Error("No window is associated with the canvas");return t.devicePixelRatio>1||this._options.allowDownsampling?t.devicePixelRatio:1},enumerable:!0,configurable:!0}),t.prototype.subscribeCanvasConfigured=function(t){this._canvasConfiguredListeners.push(t)},t.prototype.unsubscribeCanvasConfigured=function(t){this._canvasConfiguredListeners=this._canvasConfiguredListeners.filter(function(i){return i!=t})},t.prototype._configureCanvas=function(){var t=this.pixelRatio;this.canvas.style.width=this._canvasSize.width+"px",this.canvas.style.height=this._canvasSize.height+"px",this.canvas.width=this._canvasSize.width*t,this.canvas.height=this._canvasSize.height*t,this._emitCanvasConfigured()},t.prototype._emitCanvasConfigured=function(){var t=this;this._canvasConfiguredListeners.forEach(function(i){return i.call(t)})},t.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw new Error("Resolution listener is already installed");var t=this.canvas.ownerDocument.defaultView;if(null==t)throw new Error("No window is associated with the canvas");var i=t.devicePixelRatio;this._resolutionMediaQueryList=t.matchMedia("all and (resolution: "+i+"dppx)"),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){this._configureCanvas(),this._reinstallResolutionListener()},t}();function u(t,i){var n,e=((n={})[0]=[],n[1]=[t.lineWidth,t.lineWidth],n[2]=[2*t.lineWidth,2*t.lineWidth],n[3]=[6*t.lineWidth,6*t.lineWidth],n[4]=[t.lineWidth,4*t.lineWidth],n)[i];t.setLineDash(e)}function l(t,i,n,e){t.beginPath();var s=t.lineWidth%2?.5:0;t.moveTo(n,i+s),t.lineTo(e,i+s),t.stroke()}n.d(i,"a",function(){return ae}),(h=s||(s={}))[h.Simple=0]="Simple",h[h.WithSteps=1]="WithSteps",function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(r||(r={}));var a=function(t,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(t,i)};function c(t,i){function n(){this.constructor=t}a(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}var f=function(){return(f=Object.assign||function(t){for(var i,n=1,e=arguments.length;n<e;n++)for(var s in i=arguments[n])Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s]);return t}).apply(this,arguments)};function p(){for(var t=0,i=0,n=arguments.length;i<n;i++)t+=arguments[i].length;var e=Array(t),s=0;for(i=0;i<n;i++)for(var r=arguments[i],h=0,o=r.length;h<o;h++,s++)e[s]=r[h];return e}function v(t,i){if(!t)throw new Error("Assertion failed"+(i?": "+i:""))}function d(t){if(void 0===t)throw new Error("Value is undefined");return t}function y(t){if(null===t)throw new Error("Value is null");return t}function w(t){return y(d(t))}function g(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];for(var e=0,s=i;e<s.length;e++){var r=s[e];for(var h in r)void 0!==r[h]&&("object"!=typeof r[h]||void 0===t[h]?t[h]=r[h]:g(t[h],r[h]))}return t}function m(t){return"number"==typeof t&&isFinite(t)}function b(t){return"number"==typeof t&&t%1==0}function M(t){return"string"==typeof t}function _(t){return!(t<=0||t>0)}function S(t){return"boolean"==typeof t}function C(t){var i,n,e,s=t;if(!s||"object"!=typeof s)return s;for(n in i=Array.isArray(s)?[]:{},s)s.hasOwnProperty(n)&&(e=s[n],i[n]=e&&"object"==typeof e?C(e):e);return i}function x(t){return null!==t}function G(t){return null===t?void 0:t}var T,E,B,V,L=function(){function t(){this.t=[]}return t.prototype.i=function(t){this.t=t},t.prototype.s=function(t,i,n,e){this.t.forEach(function(s){t.save(),s.s(t,i,n,e),t.restore()})},t}(),D=function(){function t(){}return t.prototype.s=function(t,i,n,e){t.save(),t.scale(i,i),this.h(t,n,e),t.restore()},t.prototype.u=function(t,i,n,e){t.save(),t.scale(i,i),this.o(t,n,e),t.restore()},t.prototype.o=function(t,i,n){},t}(),R=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.l=null,i}return c(i,t),i.prototype.v=function(t){this.l=t},i.prototype.h=function(t){if(null!==this.l&&null!==this.l._){var i=this.l._,n=this.l,e=function(e){t.beginPath();for(var s=i.to-1;s>=i.from;--s){var r=n.M[s];t.moveTo(r.m,r.p),t.arc(r.m,r.p,e,0,2*Math.PI)}t.fill()};t.fillStyle=n.g,e(n.k+2),t.fillStyle=n.N,e(n.k)}},i}(D),O={from:0,to:1},k=function(){function t(t,i){this.S=new L,this.D=[],this.T=[],this.C=!0,this.A=t,this.L=i,this.S.i(this.D)}return t.prototype.B=function(t){var i=this,n=this.A.V();n.length!==this.D.length&&(this.T=n.map(function(){return{M:[{m:0,p:0,F:0,P:0}],N:"",g:i.A.O().layout.backgroundColor,k:0,_:null}}),this.D=this.T.map(function(t){var i=new R;return i.v(t),i}),this.S.i(this.D)),this.C=!0},t.prototype.I=function(t,i,n){return this.C&&(this.W(),this.C=!1),this.S},t.prototype.W=function(){var t=this,i=this.A.V(),n=this.L.R(),e=this.A.U();i.forEach(function(i,s){var r=t.T[s],h=i.j(n);if(null!==h){var o=y(i.q());r.N=i.K().Y(n).H,r.g=t.A.O().layout.backgroundColor,r.k=h.k,r.M[0].P=h.P,r.M[0].p=i.X().$(h.P,o.Z),r.M[0].F=n,r.M[0].m=e.J(n),r._=O}else r._=null})},t}(),N=function(){function t(t){this.G=t}return t.prototype.s=function(t,i,n,e){if(null!==this.G){var s=this.G.it.tt,r=this.G.nt.tt;if(s||r){t.save();var h=Math.round(this.G.m*i),o=Math.round(this.G.p*i),a=Math.ceil(this.G.st*i),c=Math.ceil(this.G.ht*i);t.lineCap="butt",s&&h>=0&&(t.lineWidth=Math.floor(this.G.it.rt*i),t.strokeStyle=this.G.it.et,t.fillStyle=this.G.it.et,u(t,this.G.it.ut),function(t,i,n,e){t.beginPath();var s=t.lineWidth%2?.5:0;t.moveTo(i+s,0),t.lineTo(i+s,e),t.stroke()}(t,h,0,c)),r&&o>=0&&(t.lineWidth=Math.floor(this.G.nt.rt*i),t.strokeStyle=this.G.nt.et,t.fillStyle=this.G.nt.et,u(t,this.G.nt.ut),l(t,o,0,a)),t.restore()}}},t}(),P=function(){function t(t){this.C=!0,this.ot={it:{rt:1,ut:0,et:"",tt:!1},nt:{rt:1,ut:0,et:"",tt:!1},st:0,ht:0,m:0,p:0},this.at=new N(this.ot),this.lt=t}return t.prototype.B=function(){this.C=!0},t.prototype.I=function(t,i){return this.C&&this.W(),this.at},t.prototype.W=function(){var t=this.lt.tt(),i=y(this.lt.ft()),n=i.ct().O().crosshair,e=this.ot;e.nt.tt=t&&this.lt.vt(i),e.it.tt=t&&this.lt._t(),e.nt.rt=n.horzLine.width,e.nt.ut=n.horzLine.style,e.nt.et=n.horzLine.color,e.it.rt=n.vertLine.width,e.it.ut=n.vertLine.style,e.it.et=n.vertLine.color,e.st=i.dt(),e.ht=i.wt(),e.m=this.lt.Mt(),e.p=this.lt.bt()},t}(),F={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",feldspar:"#d19275",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslateblue:"#8470ff",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",violetred:"#d02090",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Z(t){return _(i=t)||i<0?0:i>255?255:Math.round(i);var i}function z(t){return _(i=t)||i<0?0:i>1?1:Math.round(1e4*i)/1e4;var i}function I(t){var i=function(t){(t=t.toLowerCase())in F&&(t=F[t]);var i,n,e=(i=t,null!==(n=B.re.exec(i))?B.parse(n):null);if(null!==e)return e;var s=function(t){var i=E.re.exec(t);return null!==i?E.parse(i):null}(t);if(null!==s)return s;var r=function(t){var i=T.re.exec(t);return null!==i?T.parse(i):null}(t);if(null!==r)return r;var h=function(t){var i=V.re.exec(t);return null!==i?V.parse(i):null}(t);return null!==h?[h[0],h[1],h[2]]:null}(t);if(null!==i)return i;throw new Error("Passed color string "+t+" does not match any of the known color representations")}function U(t,i){if(i<0||i>255)throw new Error("invalid threshold value, valid values are [0, 255]");return function(t){return.199*t[0]+.687*t[1]+.114*t[2]}(t)>=i?"white":"black"}function W(t){return"black"===U(I(t),160)?"white":"black"}function A(t,i,n,e,s,r){t.fillRect(i,n,r,s),t.fillRect(i+r,n,e-2*r,r),t.fillRect(i+r,n+s-r,e-2*r,r),t.fillRect(i+e-r,n,r,s)}function Y(t,i,n){t.save(),t.scale(i,i),n(),t.restore()}function H(t,i,n,e,s,r){t.save(),t.globalCompositeOperation="copy",t.fillStyle=r,t.fillRect(i,n,e,s),t.restore()}!function(t){t.re=/^#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])$/,t.parse=function(t){return[Z(parseInt(t[1]+t[1],16)),Z(parseInt(t[2]+t[2],16)),Z(parseInt(t[3]+t[3],16))]}}(T||(T={})),function(t){t.re=/^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,t.parse=function(t){return[Z(parseInt(t[1],16)),Z(parseInt(t[2],16)),Z(parseInt(t[3],16))]}}(E||(E={})),function(t){t.re=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,t.parse=function(t){return[Z(parseInt(t[1],10)),Z(parseInt(t[2],10)),Z(parseInt(t[3],10))]}}(B||(B={})),function(t){t.re=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/,t.parse=function(t){return[Z(parseInt(t[1],10)),Z(parseInt(t[2],10)),Z(parseInt(t[3],10)),z(parseFloat(t[4]))]}}(V||(V={}));var K,q=function(){function t(t,i){this.v(t,i)}return t.prototype.v=function(t,i){this.G=t,this.pt=i},t.prototype.s=function(t,i,n,e,s,r){if(this.G.tt){t.font=i.gt;var h=this.G.yt||!this.G.kt?i.Nt:0,o=i.xt,u=i.St,l=i.Dt,a=i.Tt,c=i.Ct,f=this.G.Et,p=Math.ceil(n.At(t,f)),v=i.Lt,d=i.Bt+u+l,y=Math.ceil(.5*d),w=o+p+a+c+h,g=this.pt.Vt;this.pt.zt&&(g=this.pt.zt);var m,b,M=(g=Math.round(g))-y,_=M+d,S="right"===s,C=S?e:0,x=Math.ceil(e*r),G=C;if(t.fillStyle=function(t){return function(t){return 0===t.indexOf("#")}(t)?t:"rgba("+(i=[(n=I(t))[0],n[1],n[2],z(1)])[0]+", "+i[1]+", "+i[2]+", "+i[3]+")";var i,n}(this.pt.Ft),t.lineWidth=1,t.lineCap="butt",f){S?(m=C-h,b=(G=C-w)+c):(G=C+w,m=C+h,b=C+o+h+a);var T=Math.max(1,Math.floor(r)),E=Math.max(1,Math.floor(o*r)),B=S?x:0,V=Math.round(M*r),L=Math.round(G*r),D=Math.round(g*r)-Math.floor(.5*r),R=D+T+(D-V),O=Math.round(m*r);t.save(),t.beginPath(),t.moveTo(B,V),t.lineTo(L,V),t.lineTo(L,R),t.lineTo(B,R),t.fill(),t.fillStyle=this.G.Pt,t.fillRect(S?x-E:0,V,E,R-V),this.G.yt&&(t.fillStyle=this.pt.et,t.fillRect(B,D,O-B,T)),t.textAlign="left",t.fillStyle=this.pt.et,Y(t,r,function(){t.fillText(f,b,_-l-v)}),t.restore()}}},t.prototype.wt=function(t,i){return this.G.tt?t.Bt+t.St+t.Dt:0},t}(),X=function(){function t(t){this.Ot={Vt:0,et:"#FFF",Ft:"#000"},this.It={Et:"",tt:!1,yt:!0,kt:!1,Pt:""},this.Wt={Et:"",tt:!1,yt:!1,kt:!0,Pt:""},this.C=!0,this.Rt=new(t||q)(this.It,this.Ot),this.Ut=new(t||q)(this.Wt,this.Ot)}return t.prototype.Et=function(){return this.It.Et},t.prototype.Ft=function(){return this.Ot.Ft},t.prototype.et=function(){return W(this.Ft())},t.prototype.Vt=function(){return this.jt(),this.Ot.Vt},t.prototype.B=function(){this.C=!0},t.prototype.wt=function(t,i){return void 0===i&&(i=!1),Math.max(this.Rt.wt(t,i),this.Ut.wt(t,i))},t.prototype.qt=function(){return this.Ot.zt||0},t.prototype.Ht=function(t){this.Ot.zt=t},t.prototype.Yt=function(){return this.jt(),this.It.tt||this.Wt.tt},t.prototype.Kt=function(){return this.jt(),this.It.tt},t.prototype.I=function(t){return this.jt(),this.It.yt=this.It.yt&&t.O().drawTicks,this.Wt.yt=this.Wt.yt&&t.O().drawTicks,this.Rt.v(this.It,this.Ot),this.Ut.v(this.Wt,this.Ot),this.Rt},t.prototype.$t=function(){return this.jt(),this.Rt.v(this.It,this.Ot),this.Ut.v(this.Wt,this.Ot),this.Ut},t.prototype.jt=function(){this.C&&(this.It.yt=!0,this.Wt.yt=!1,this.Xt(this.It,this.Wt,this.Ot))},t}(),j=function(t){function i(i,n,e){var s=t.call(this)||this;return s.lt=i,s.Zt=n,s.Jt=e,s}return c(i,t),i.prototype.Xt=function(t,i,n){t.tt=!1;var e=this.lt.O().horzLine;if(e.labelVisible){var s=this.Zt.q();if(this.lt.tt()&&!this.Zt.Gt()&&null!==s){n.Ft=e.labelBackgroundColor,n.et=W(e.labelBackgroundColor);var r=this.Jt(this.Zt);n.Vt=r.Vt,t.Et=this.Zt.Qt(r.P,s),t.tt=!0}}},i}(X),$=/[1-9]/g,J=function(){function t(){this.G=null}return t.prototype.v=function(t){this.G=t},t.prototype.s=function(t,i,n){var e=this;if(null!==this.G&&!1!==this.G.tt&&0!==this.G.Et.length){t.font=i.gt;var s=Math.round(i.ti.At(t,this.G.Et,$));if(!(s<=0)){t.save();var r=i.ii,h=s+2*r,o=h/2,u=this.G.dt,l=this.G.Vt,a=Math.floor(l-o)+.5;a<0?(l+=Math.abs(0-a),a=Math.floor(l-o)+.5):a+h>u&&(l-=Math.abs(u-(a+h)),a=Math.floor(l-o)+.5);var c=a+h,f=0+i.xt+i.St+i.Bt+i.Dt;t.fillStyle=this.G.Ft;var p=Math.round(a*n),v=Math.round(0*n),d=Math.round(c*n),w=Math.round(f*n);t.fillRect(p,v,d-p,w-v);var g=Math.round(this.G.Vt*n),m=v,b=Math.round((m+i.xt+i.Nt)*n);t.fillStyle=this.G.et;var M=Math.max(1,Math.floor(n)),_=Math.floor(.5*n);t.fillRect(g-_,m,M,b-m);var S=f-i.Lt-i.Dt;t.textAlign="left",t.fillStyle=this.G.et,Y(t,n,function(){t.fillText(y(e.G).Et,a+r,S)}),t.restore()}}},t}(),Q=function(t){function i(i,n,e){var s=t.call(this)||this;return s.C=!0,s.at=new J,s.ot={tt:!1,Ft:"#4c525e",et:"white",Et:"",dt:0,Vt:NaN},s.L=i,s.ni=n,s.Jt=e,s}return c(i,t),i.prototype.B=function(){this.C=!0},i.prototype.I=function(){return this.C&&(this.W(),this.C=!1),this.at.v(this.ot),this.at},i.prototype.W=function(){var t=this.ot;t.tt=!1;var i=this.L.O().vertLine;if(i.labelVisible){var n=this.ni.U();if(!n.Gt()){var e=n.si(this.L.R());t.dt=n.dt();var s=this.Jt();s.F&&(t.Vt=s.Vt,t.Et=n.hi(y(e)),t.tt=!0,t.Ft=i.labelBackgroundColor,t.et=W(i.labelBackgroundColor))}}},i}(function(){function t(){this.ri="",this.ei="#585858",this.ui=0}return t.prototype.Et=function(){return this.ri},t.prototype.Ft=function(){return this.ei},t.prototype.et=function(){return"black"===U(I(this.ei),150)?"white":"black"},t.prototype.Vt=function(){return this.ui},t}()),tt=function(){function t(){this.oi=null,this.ai=0}return t.prototype.li=function(){return this.ai},t.prototype.fi=function(t){this.ai=t},t.prototype.X=function(){return this.oi},t.prototype.ci=function(t){this.oi=t},t.prototype.vi=function(t,i){return[]},t.prototype._i=function(t){return[]},t.prototype.di=function(){return[]},t}();!function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet"}(K||(K={}));var it=function(t){function i(i,n){var e,s,r=t.call(this)||this;r.wi=null,r.Mi=NaN,r.bi=0,r.mi=!0,r.pi=new Map,r.gi=!1,r.yi=NaN,r.ki=NaN,r.Ni=NaN,r.xi=NaN,r.ni=i,r.Si=n,r.Di=new k(i,r),r.Ti=(e=function(){return r.Mi},s=function(){return r.ki},function(t){var i=s(),n=e();if(t===y(r.wi).Ci())return{P:n,Vt:i};var h=y(t.q());return{P:t.Ei(i,h),Vt:i}});var h=function(){return{F:r.ni.U().si(r.bi),Vt:r.Mt()}};return r.Ai=new Q(r,i,h),r.Li=new P(r),r}return c(i,t),i.prototype.Bi=function(){return this.bi},i.prototype.O=function(){return this.Si},i.prototype.Vi=function(t,i){this.Ni=t,this.xi=i},i.prototype.zi=function(){this.Ni=NaN,this.xi=NaN},i.prototype.Fi=function(){return this.Ni},i.prototype.Pi=function(){return this.xi},i.prototype.Oi=function(t,i,n){this.gi||(this.gi=!0),this.mi=!0,this.Ii(t,i,n)},i.prototype.R=function(){return this.bi},i.prototype.Mt=function(){return this.yi},i.prototype.bt=function(){return this.ki},i.prototype.tt=function(){return this.mi},i.prototype.Wi=function(){this.mi=!1,this.Ri(),this.Mi=NaN,this.yi=NaN,this.ki=NaN,this.wi=null,this.zi()},i.prototype._i=function(t){return null!==this.wi?[this.Li,this.Di]:[]},i.prototype.vt=function(t){return t===this.wi&&this.Si.horzLine.visible},i.prototype._t=function(){return this.Si.vertLine.visible},i.prototype.vi=function(t,i){this.mi&&this.wi===t||this.pi.clear();var n=[];return this.wi===t&&n.push(this.Ui(this.pi,i,this.Ti)),n},i.prototype.di=function(){return this.mi?[this.Ai]:[]},i.prototype.ft=function(){return this.wi},i.prototype.ji=function(){this.pi.forEach(function(t){return t.B()}),this.Ai.B(),this.Di.B()},i.prototype.qi=function(t){return t&&!t.Ci().Gt()?t.Ci():null},i.prototype.Ii=function(t,i,n){this.Hi(t,i,n)&&this.ji()},i.prototype.Hi=function(t,i,n){var e=this.yi,s=this.ki,r=this.Mi,h=this.bi,o=this.wi,u=this.qi(n);this.bi=t,this.yi=isNaN(t)?NaN:this.ni.U().J(t),this.wi=n;var l=null!==u?u.q():null;return null!==u&&null!==l?(this.Mi=i,this.ki=u.$(i,l)):(this.Mi=NaN,this.ki=NaN),e!==this.yi||s!==this.ki||h!==this.bi||r!==this.Mi||o!==this.wi},i.prototype.Ri=function(){var t=this.ni.V().map(function(t){return t.Ki().Yi()}).filter(x),i=0===t.length?null:Math.max.apply(Math,t);this.bi=null!==i?i:NaN},i.prototype.Ui=function(t,i,n){var e=t.get(i);return void 0===e&&(e=new j(this,i,n),t.set(i,e)),e},i}(tt);function nt(t,i){if(!m(t))return"n/a";if(!b(i))throw new TypeError("invalid length");if(i<0||i>16)throw new TypeError("invalid length");return 0===i?t.toString():("0000000000000000"+t.toString()).slice(-i)}var et=function(){function t(t,i,n,e){if(i||(i=1),m(t)&&b(t)||(t=100),t<0)throw new TypeError("invalid base");this.Zt=t,this.$i=i,this.Xi=e,n&&void 0!==e&&e>0&&2!==e&&4!==e&&8!==e||(this.Zi=n,this.Ji())}return t.prototype.Gi=function(t){var i=t<0?"−":"";return t=Math.abs(t),this.Zi?i+this.Qi(t):i+this.tn(t)},t.prototype.Ji=function(){if(this.in=0,this.Zt>0&&this.$i>0){var t=this.Zt;for(this.Zi&&this.Xi&&(t/=this.Xi);t>1;)t/=10,this.in++}},t.prototype.tn=function(t){var i;i=this.Zi?Math.pow(10,this.in||0):this.Zt/this.$i;var n=Math.floor(t),e="",s=void 0!==this.in?this.in:NaN;if(i>1){var r=+(Math.round(t*i)-n*i).toFixed(this.in);r>=i&&(r-=i,n+=1),e="."+nt(+r.toFixed(this.in)*this.$i,s)}else n=Math.round(n*i)/i,s>0&&(e="."+nt(0,s));return n.toFixed(0)+e},t.prototype.Qi=function(t){var i=this.Zt/this.$i,n=Math.floor(t),e=Math.round(t*i)-n*i;if(e===i&&(e=0,n+=1),!this.in)throw new Error("_fractionalLength is not calculated");var s="";if(this.Xi){var r=e%this.Xi;s=nt(e=(e-r)/this.Xi,this.in)+"'"+(2===this.Xi?["0","5"][r]:8===this.Xi?["0","1","2","3","4","5","6","7"][r]:["0","2","5","7"][r])}else s=nt(e*this.$i,this.in);return n.toString()+"'"+s},t}(),st=function(t){function i(i){return void 0===i&&(i=100),t.call(this,i)||this}return c(i,t),i.prototype.Gi=function(i){return t.prototype.Gi.call(this,i)+"%"},i}(et),rt=function(){function t(){this.nn=[]}return t.prototype.sn=function(t,i,n){var e={hn:t,rn:i,en:!0===n};this.nn.push(e)},t.prototype.un=function(t){var i=this.nn.findIndex(function(i){return t===i.hn});i>-1&&this.nn.splice(i,1)},t.prototype.on=function(t){this.nn=this.nn.filter(function(i){return i.rn===t})},t.prototype.an=function(t,i){var n=p(this.nn);this.nn=this.nn.filter(function(t){return!t.en}),n.forEach(function(n){return n.hn(t,i)})},t.prototype.ln=function(){return this.nn.length>0},t.prototype.fn=function(){this.nn=[]},t}(),ht=function(){function t(t,i){this.cn=t,this.vn=i}return t.prototype._n=function(t){return null!==t&&this.cn===t.cn&&this.vn===t.vn},t.prototype.dn=function(){return new t(this.cn,this.vn)},t.prototype.wn=function(){return this.cn},t.prototype.Mn=function(t){this.cn=t},t.prototype.bn=function(){return this.vn},t.prototype.mn=function(t){this.vn=t},t.prototype.pn=function(){return this.vn-this.cn},t.prototype.Gt=function(){return this.vn===this.cn||Number.isNaN(this.vn)||Number.isNaN(this.cn)},t.prototype.gn=function(i){return null===i?this:new t(Math.min(this.wn(),i.wn()),Math.max(this.bn(),i.bn()))},t.prototype.yn=function(t,i){this.cn=Math.min(this.cn,t),this.vn=Math.max(this.vn,i)},t.prototype.kn=function(t,i){this.cn=t,this.vn=i},t.prototype.Nn=function(t){if(m(t)&&0!=this.vn-this.cn){var i=.5*(this.vn+this.cn),n=this.vn-i,e=this.cn-i;n*=t,e*=t,this.vn=i+n,this.cn=i+e}},t.prototype.xn=function(t){m(t)&&(this.vn+=t,this.cn+=t)},t.prototype.Sn=function(t){return t.wn()>this.cn&&t.bn()<this.vn},t.prototype.Dn=function(){return{minValue:this.cn,maxValue:this.vn}},t.Tn=function(i){return null===i?null:new t(i.minValue,i.maxValue)},t}();function ot(t,i,n){return Math.min(Math.max(t,i),n)}function ut(t,i,n){return i-t<=n}function lt(t){return t<=0?NaN:Math.log(t)/Math.log(10)}function at(t){var i=Math.ceil(t);return i%2!=0?i-1:i}function ct(t){var i=Math.ceil(t);return i%2==0?i-1:i}function ft(t,i){var n=100*(t-i)/i;return i<0?-n:n}function pt(t,i){var n=ft(t.wn(),i),e=ft(t.bn(),i);return new ht(n,e)}function vt(t,i){var n=100*(t-i)/i+100;return i<0?-n:n}function dt(t,i){var n=vt(t.wn(),i),e=vt(t.bn(),i);return new ht(n,e)}function yt(t){var i=Math.abs(t);if(i<1e-8)return 0;var n=lt(i+1e-4)+4;return t<0?-n:n}function wt(t){var i=Math.abs(t);if(i<1e-8)return 0;var n=Math.pow(10,i-4)-1e-4;return t<0?-n:n}function gt(t){if(null===t)return null;var i=yt(t.wn()),n=yt(t.bn());return new ht(i,n)}var mt,bt=function(){function t(t,i){if(this.Cn=t,this.En=i,function(t){if(t<0)return!1;for(var i=t;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.Cn))this.An=[2,2.5,2];else{this.An=[];for(var n=this.Cn;1!==n;){if(n%2==0)this.An.push(2),n/=2;else{if(n%5!=0)throw new Error("unexpected base");this.An.push(2),this.An.push(2.5),n/=5}if(this.An.length>100)throw new Error("something wrong with base")}}}return t.prototype.Ln=function(t,i,n){for(var e,s=0===this.Cn?0:1/this.Cn,r=Math.pow(10,Math.max(0,Math.ceil(lt(t-i)))),h=0,o=this.En[0];;){var u=ut(r,s,1e-9)&&r>s+1e-9,l=ut(r,n*o,1e-9),a=ut(r,1,1e-9);if(!(u&&l&&a))break;r/=o,o=this.En[++h%this.En.length]}if(r<=s+1e-9&&(r=s),r=Math.max(1,r),this.An.length>0&&(e=r,1,1e-9,Math.abs(e-1)<1e-9))for(h=0,o=this.An[0];ut(r,n*o,1e-9)&&r>s+1e-9;)r/=o,o=this.An[++h%this.An.length];return r},t}(),Mt=function(){function t(t,i,n,e){this.Bn=[],this.Zt=t,this.Cn=i,this.Vn=n,this.zn=e}return t.prototype.Fn=function(t){if(t<0)throw new Error("base < 0");this.Cn=t},t.prototype.Ln=function(t,i){if(t<i)throw new Error("high < low");var n=this.Zt.wt(),e=(t-i)*this.Pn()/n,s=new bt(this.Cn,[2,2.5,2]),r=new bt(this.Cn,[2,2,2.5]),h=new bt(this.Cn,[2.5,2,2]),o=[];return o.push(s.Ln(t,i,e)),o.push(r.Ln(t,i,e)),o.push(h.Ln(t,i,e)),function(t){if(t.length<1)throw Error("array is empty");for(var i=t[0],n=1;n<t.length;++n)t[n]<i&&(i=t[n]);return i}(o)},t.prototype.On=function(){var t=this.Zt,i=t.q();if(null!==i){var n=t.wt(),e=this.Vn(n-1,i),s=this.Vn(0,i),r=this.Zt.O().entireTextOnly?this.In()/2:0,h=r,o=n-1-r,u=Math.max(e,s),l=Math.min(e,s);if(u!==l){for(var a=this.Ln(u,l),c=u%a,f=u>=l?1:-1,p=null,v=0,d=u-(c+=c<0?a:0);d>l;d-=a){var y=this.zn(d,i,!0);null!==p&&Math.abs(y-p)<this.Pn()||y<h||y>o||(v<this.Bn.length?(this.Bn[v].Wn=y,this.Bn[v].Rn=t.Un(d)):this.Bn.push({Wn:y,Rn:t.Un(d)}),v++,p=y,t.jn()&&(a=this.Ln(d*f,l)))}this.Bn.length=v}else this.Bn=[]}else this.Bn=[]},t.prototype.qn=function(){return this.Bn},t.prototype.In=function(){return this.Zt.Bt()},t.prototype.Pn=function(){return Math.ceil(2.5*this.In())},t}();function _t(t){return t.slice().sort(function(t,i){return y(t.li())-y(i.li())})}!function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"}(mt||(mt={}));var St,Ct=new st,xt=new et(100,1),Gt=function(){function t(t,i,n,e){this.Hn=0,this.Yn=null,this.Kn=new rt,this.$n=null,this.Xn=null,this.Zn=new rt,this.Jn={Gn:!1,Qn:null},this.ts=0,this.ns=0,this.ss=new rt,this.hs=new rt,this.rs=[],this.es=null,this.us=null,this.os=null,this.as=null,this.ls=xt,this.fs=new rt,this.cs=t,this.Si=i,this.vs=n,this._s=e,this.ds=new Mt(this,100,this.ws.bind(this),this.Ms.bind(this))}return t.prototype.bs=function(){return this.cs},t.prototype.O=function(){return this.Si},t.prototype.ms=function(t){if(g(this.Si,t),this.ps(),void 0!==t.mode&&this.gs({ys:t.mode}),this.fs.an(),void 0!==t.scaleMargins){var i=d(t.scaleMargins.top),n=d(t.scaleMargins.bottom);if(i<0||i>1)throw new Error("Invalid top margin - expect value between 0 and 1, given="+i);if(n<0||n>1||i+n>1)throw new Error("Invalid bottom margin - expect value between 0 and 1, given="+n);if(i+n>1)throw new Error("Invalid margins - sum of margins must be less than 1, given="+(i+n));this.ks(),this.us=null}},t.prototype.Ns=function(){return this.fs},t.prototype.xs=function(){return this.Si.autoScale},t.prototype.jn=function(){return 1===this.Si.mode},t.prototype.Ss=function(){return 2===this.Si.mode},t.prototype.Ds=function(){return 3===this.Si.mode},t.prototype.ys=function(){return{Ts:this.Si.autoScale,Cs:this.Si.invertScale,ys:this.Si.mode}},t.prototype.gs=function(t){var i=this.ys(),n=null;void 0!==t.Ts&&(this.Si.autoScale=t.Ts),void 0!==t.ys&&(this.Si.mode=t.ys,2!==t.ys&&3!==t.ys||(this.Si.autoScale=!0),this.Jn.Gn=!1),1===i.ys&&t.ys!==i.ys&&(function(t){if(null===t)return!1;var i=wt(t.wn()),n=wt(t.bn());return isFinite(i)&&isFinite(n)}(this.$n)?null!==(n=function(t){if(null===t)return null;var i=wt(t.wn()),n=wt(t.bn());return new ht(i,n)}(this.$n))&&this.Es(n):this.Si.autoScale=!0),1===t.ys&&t.ys!==i.ys&&null!==(n=gt(this.$n))&&this.Es(n);var e=i.ys!==this.Si.mode;e&&(2===i.ys||this.Ss())&&this.ps(),e&&(3===i.ys||this.Ds())&&this.ps(),void 0!==t.Cs&&i.Cs!==t.Cs&&(this.Si.invertScale=t.Cs,this.As()),this.hs.an(i,this.ys())},t.prototype.Ls=function(){return this.hs},t.prototype.Bt=function(){return this.vs.fontSize},t.prototype.wt=function(){return this.Hn},t.prototype.Bs=function(t){this.Hn!==t&&(this.Hn=t,this.ks(),this.us=null)},t.prototype.Vs=function(){if(this.Yn)return this.Yn;var t=this.wt()-this.zs()-this.Fs();return this.Yn=t,t},t.prototype.Ps=function(){return this.Kn},t.prototype.Os=function(){return this.Is(),this.$n},t.prototype.Ws=function(){return this.Zn},t.prototype.Es=function(t,i,n){var e=this.$n;(i||null===e&&null!==t||null!==e&&!e._n(t))&&(this.us=null,this.$n=t,n||this.Zn.an(e,t))},t.prototype.Gt=function(){return this.Is(),0===this.Hn||!this.$n||this.$n.Gt()},t.prototype.Rs=function(t){return this.Cs()?t:this.wt()-1-t},t.prototype.$=function(t,i){return this.Ss()?t=ft(t,i):this.Ds()&&(t=vt(t,i)),this.Ms(t,i)},t.prototype.Us=function(t,i,n){this.Is();for(var e=this.Fs(),s=y(this.Os()),r=s.wn(),h=s.bn(),o=this.Vs()-1,u=this.Cs(),l=o/(h-r),a=void 0===n?0:n.from,c=void 0===n?t.length:n.to,f=this.js(),p=a;p<c;p++){var v=t[p],d=v.P;if(!isNaN(d)){var w=d;null!==f&&(w=f(v.P,i));var g=e+l*(w-r),m=u?g:this.Hn-1-g;v.p=m}}},t.prototype.qs=function(t,i,n){this.Is();for(var e=this.Fs(),s=y(this.Os()),r=s.wn(),h=s.bn(),o=this.Vs()-1,u=this.Cs(),l=o/(h-r),a=void 0===n?0:n.from,c=void 0===n?t.length:n.to,f=this.js(),p=a;p<c;p++){var v=t[p],d=v.open,w=v.high,g=v.low,m=v.close;null!==f&&(d=f(v.open,i),w=f(v.high,i),g=f(v.low,i),m=f(v.close,i));var b=e+l*(d-r),M=u?b:this.Hn-1-b;v.Hs=M,b=e+l*(w-r),M=u?b:this.Hn-1-b,v.Ys=M,b=e+l*(g-r),M=u?b:this.Hn-1-b,v.Ks=M,b=e+l*(m-r),M=u?b:this.Hn-1-b,v.$s=M}},t.prototype.Ei=function(t,i){var n=this.ws(t,i);return this.Xs(n,i)},t.prototype.Xs=function(t,i){var n=t;return this.Ss()?n=function(t,i){return i<0&&(t=-t),t/100*i+i}(n,i):this.Ds()&&(n=function(t,i){return t-=100,i<0&&(t=-t),t/100*i+i}(n,i)),n},t.prototype.Zs=function(){return this.rs},t.prototype.Js=function(){if(this.es)return this.es;for(var t=[],i=0;i<this.rs.length;i++){var n=this.rs[i];null===n.li()&&n.fi(i+1),t.push(n)}return t=_t(t),this.es=t,this.es},t.prototype.Gs=function(t){-1===this.rs.indexOf(t)&&(this.rs.push(t),this.ps(),this.Qs())},t.prototype.th=function(t){var i=this.rs.indexOf(t);if(-1===i)throw new Error("source is not attached to scale");this.rs.splice(i,1),this.Gt()&&this.gs({Ts:!0}),this.ps(),this.Qs()},t.prototype.q=function(){for(var t=null,i=0,n=this.rs;i<n.length;i++){var e=n[i].q();null!==e&&(null===t||e.ih<t.ih)&&(t=e)}return null===t?null:t.Z},t.prototype.Cs=function(){return this.Si.invertScale},t.prototype.qn=function(){return this.us||(this.ds.On(),this.us=this.ds.qn(),this.ss.an()),this.us},t.prototype.nh=function(){return this.ss},t.prototype.sh=function(t){this.Ss()||this.Ds()||null===this.os&&null===this.Xn&&(this.Gt()||(this.os=this.Hn-t,this.Xn=y(this.Os()).dn()))},t.prototype.hh=function(t){if(!this.Ss()&&!this.Ds()&&null!==this.os){this.gs({Ts:!1}),(t=this.Hn-t)<0&&(t=0);var i=(this.os+.2*(this.Hn-1))/(t+.2*(this.Hn-1)),n=y(this.Xn).dn();i=Math.max(i,.1),n.Nn(i),this.Es(n)}},t.prototype.rh=function(){this.Ss()||this.Ds()||(this.os=null,this.Xn=null)},t.prototype.eh=function(t){this.xs()||null===this.as&&null===this.Xn&&(this.Gt()||(this.as=t,this.Xn=y(this.Os()).dn()))},t.prototype.uh=function(t){if(!this.xs()&&null!==this.as){var i=y(this.Os()).pn()/(this.Vs()-1),n=t-this.as;this.Cs()&&(n*=-1);var e=n*i,s=y(this.Xn).dn();s.xn(e),this.Es(s,!0),this.us=null}},t.prototype.oh=function(){this.xs()||null!==this.as&&(this.as=null,this.Xn=null)},t.prototype.ah=function(){return this.ls||this.ps(),this.ls},t.prototype.Qt=function(t,i){switch(this.Si.mode){case 2:return this.ah().Gi(ft(t,i));case 3:return this.ah().Gi(vt(t,i));default:return this.lh(t)}},t.prototype.Un=function(t){switch(this.Si.mode){case 2:case 3:return this.ah().Gi(t);default:return this.lh(t)}},t.prototype.fh=function(t){return this.lh(t,y(this.vh()).ah())},t.prototype._h=function(t,i){return t=ft(t,i),Ct.Gi(t)},t.prototype.dh=function(){return this.rs},t.prototype.wh=function(t){this.Jn={Qn:t,Gn:!1}},t.prototype.ji=function(){this.rs.forEach(function(t){return t.ji()})},t.prototype.ps=function(){this.us=null;var t=this.vh(),i=100;null!==t&&(i=Math.round(1/t.Mh())),this.ls=xt,this.Ss()?(this.ls=Ct,i=100):this.Ds()?(this.ls=new et(100,1),i=100):null!==t&&(this.ls=t.ah()),this.ds=new Mt(this,i,this.ws.bind(this),this.Ms.bind(this)),this.ds.On()},t.prototype.Qs=function(){this.es=null},t.prototype.vh=function(){return this.rs[0]||null},t.prototype.zs=function(){return this.Cs()?this.Si.scaleMargins.bottom*this.wt()+this.ns:this.Si.scaleMargins.top*this.wt()+this.ts},t.prototype.Fs=function(){return this.Cs()?this.Si.scaleMargins.top*this.wt()+this.ts:this.Si.scaleMargins.bottom*this.wt()+this.ns},t.prototype.Is=function(){this.Jn.Gn||(this.Jn.Gn=!0,this.bh())},t.prototype.ks=function(){this.Yn=null,this.Kn.an()},t.prototype.Ms=function(t,i){if(this.Is(),this.Gt())return 0;t=this.jn()&&t?yt(t):t;var n=y(this.Os()),e=this.Fs()+(this.Vs()-1)*(t-n.wn())/n.pn();return this.Rs(e)},t.prototype.ws=function(t,i){if(this.Is(),this.Gt())return 0;var n=this.Rs(t),e=y(this.Os()),s=e.wn()+e.pn()*((n-this.Fs())/(this.Vs()-1));return this.jn()?wt(s):s},t.prototype.As=function(){this.us=null,this.ds.On()},t.prototype.bh=function(){var t=this.Jn.Qn;if(null!==t){for(var i=null,n=0,e=0,s=0,r=this.dh();s<r.length;s++){var h=r[s],o=h.q();if(null!==o){var u=h.mh(t.ph(),t.gh()),l=u&&u.Os();if(null!==l){switch(this.Si.mode){case 1:l=gt(l);break;case 2:l=pt(l,o.Z);break;case 3:l=dt(l,o.Z)}if(i=null===i?l:i.gn(y(l)),null!==u){var a=u.yh();null!==a&&(n=Math.max(n,a.above),e=Math.max(n,a.below))}}}}if(n===this.ts&&e===this.ns||(this.ts=n,this.ns=e,this.us=null,this.ks()),null!==i){if(i.wn()===i.bn()){var c=this.vh(),f=5*(null===c||this.Ss()||this.Ds()?1:c.Mh());i=new ht(i.wn()-f,i.bn()+f)}this.Es(i)}else null===this.$n&&this.Es(new ht(-.5,.5));this.Jn.Gn=!0}},t.prototype.js=function(){return this.Ss()?ft:this.Ds()?vt:this.jn()?yt:null},t.prototype.lh=function(t,i){return void 0===this._s.priceFormatter?(void 0===i&&(i=this.ah()),i.Gi(t)):this._s.priceFormatter(t)},t}();function Tt(t){void 0!==t.borderColor&&(t.borderUpColor=t.borderColor,t.borderDownColor=t.borderColor),void 0!==t.wickColor&&(t.wickUpColor=t.wickColor,t.wickDownColor=t.wickColor)}!function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(St||(St={}));var Et=function(t){return t.getUTCFullYear()};var Bt=function(){function t(t,i){void 0===t&&(t="yyyy-MM-dd"),void 0===i&&(i="default"),this.kh=t,this.Nh=i}return t.prototype.Gi=function(t){return function(t,i,n){return i.replace(/yyyy/g,function(t){return nt(Et(t),4)}(t)).replace(/yy/g,function(t){return nt(Et(t)%100,2)}(t)).replace(/MMMM/g,function(t,i){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"long"})}(t,n)).replace(/MMM/g,function(t,i){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"short"})}(t,n)).replace(/MM/g,function(t){return nt(function(t){return t.getUTCMonth()+1}(t),2)}(t)).replace(/dd/g,function(t){return nt(function(t){return t.getUTCDate()}(t),2)}(t))}(t,this.kh,this.Nh)},t}(),Vt=function(){function t(t){this.xh=t||"%h:%m:%s"}return t.prototype.Gi=function(t){return this.xh.replace("%h",nt(t.getUTCHours(),2)).replace("%m",nt(t.getUTCMinutes(),2)).replace("%s",nt(t.getUTCSeconds(),2))},t}(),Lt={Sh:"yyyy-MM-dd",Dh:"%h:%m:%s",Th:" ",Ch:"default"},Dt=function(){function t(t){void 0===t&&(t={});var i=f(f({},Lt),t);this.Eh=new Bt(i.Sh,i.Ch),this.Ah=new Vt(i.Dh),this.Lh=i.Th}return t.prototype.Gi=function(t){return""+this.Eh.Gi(t)+this.Lh+this.Ah.Gi(t)},t}(),Rt=function(){function t(t,i){void 0===i&&(i=50),this.Bh=0,this.Vh=1,this.zh=1,this.Fh=new Map,this.Ph=new Map,this.Oh=t,this.Ih=i}return t.prototype.Gi=function(t){var i=void 0===t.Wh?new Date(1e3*t.Rh).getTime():new Date(Date.UTC(t.Wh.year,t.Wh.month-1,t.Wh.day)).getTime(),n=this.Fh.get(i);if(void 0!==n)return n.Uh;if(this.Bh===this.Ih){var e=this.Ph.get(this.zh);this.Ph.delete(this.zh),this.Fh.delete(d(e)),this.zh++,this.Bh--}var s=this.Oh(t);return this.Fh.set(i,{Uh:s,jh:this.Vh}),this.Ph.set(this.Vh,i),this.Bh++,this.Vh++,s},t}(),Ot=function(){function t(t,i){v(t<=i,"right should be >= left"),this.qh=t,this.Hh=i}return t.prototype.ph=function(){return this.qh},t.prototype.gh=function(){return this.Hh},t.prototype.Yh=function(){return this.Hh-this.qh+1},t.prototype.Kh=function(t){return this.qh<=t&&t<=this.Hh},t.prototype._n=function(t){return this.qh===t.ph()&&this.Hh===t.gh()},t}();function kt(t,i){return null===t||null===i?t===i:t._n(i)}function Nt(t,i){return t.Bi-i.Bi}var Pt,Ft=function(){function t(){this.$h=1/0,this.Xh=-1/0,this.Zh=new Map,this.Jh=[],this.Gh=new rt,this.Fh=null,this.Qh=NaN}return t.prototype.tr=function(){this.Zh.clear(),this.Jh=[],this.$h=1/0,this.Xh=-1/0,this.Fh=null,this.Gh.an()},t.prototype.gn=function(t){for(var i=this.Jh,n={},e=0,s=t;e<s.length;e++){var r=s[e],h=r.Bi,o=r.ir,u=this.Zh.get(r.Bi);if(u){if(u.Bi===r.Bi&&u.ir===r.ir){u.F=r.F;continue}this.nr(u)}this.Zh.set(h,r),this.$h>h&&(this.$h=h),this.Xh<h&&(this.Xh=h),void 0===(l=i[o])&&(l=[],i[o]=l),l.push(r),n[o]=!0}for(o=i.length;o--;){var l;void 0!==(l=i[o])&&(0===l.length&&delete i[o],n[o]&&l.sort(Nt))}this.Fh=null,this.Gh.an()},t.prototype.sr=function(t){var i=this.Zh.get(t);return void 0===i?null:i.F},t.prototype.hr=function(t){for(var i=this.$h,n=this.Xh;n-i>2;){if(1e3*d(this.Zh.get(i)).F.Rh===t)return i;if(1e3*d(this.Zh.get(n)).F.Rh===t)return n;var e=Math.round((i+n)/2);1e3*d(this.Zh.get(e)).F.Rh>t?n=e:i=e}return i},t.prototype.rr=function(t,i){var n=Math.ceil(i/t);if(this.Qh===n&&this.Fh)return this.Fh;this.Qh=n;for(var e=[],s=this.Jh.length;s--;)if(this.Jh[s]){var r=e;e=[];for(var h=r.length,o=0,u=d(this.Jh[s]),l=u.length,a=1/0,c=-1/0,f=0;f<l;f++){for(var p=u[f],v=p.Bi;o<h;){var y=r[o],w=y.Bi;if(!(w<v)){a=w;break}o++,e.push(y),c=w,a=1/0}a-v>=n&&v-c>=n&&(e.push(p),c=v)}for(;o<h;o++)e.push(r[o])}return this.Fh=e,this.Fh},t.prototype.nr=function(t){var i=t.Bi;if(this.Zh.get(i)===t){this.Zh.delete(i),i<=this.$h&&this.$h++,i>=this.Xh&&this.Xh--,this.Xh<this.$h&&(this.$h=1/0,this.Xh=-1/0);var n=d(this.Jh[t.ir]),e=n.indexOf(t);-1!==e&&n.splice(e,1)}},t}(),Zt=function(){function t(){this.er=[]}return t.prototype.ur=function(){this.er=[]},t.prototype.or=function(){return this.er.length},t.prototype.ar=function(){return this.lr(0)},t.prototype.Yi=function(){return this.lr(this.er.length-1)},t.prototype.gn=function(t,i){if(0!==i.length)if(0!==this.er.length){var n=t;if(n<0){var e=Math.abs(n);if(i.length<e)return;this.er=new Array(e).concat(this.er);for(var s=0;s<i.length;++s)this.er[t+s]=i[s]}else{for(var r=n;r<this.er.length&&r-n<i.length;++r)this.er[r]=i[r-n];var h=n+i.length;if(h>this.er.length){e=h-this.er.length;for(var o=r;o<r+e;++o)this.er.push(i[o-n])}}}else this.er=i},t.prototype.cr=function(t){var i=this.vr(t);return null!==i?this.er[i]:null},t.prototype._r=function(t,i){if(this.er.length<1)return null;if(t>this.er[this.er.length-1].Rh)return i?this.er.length-1:null;for(var n=0;n<this.er.length;++n){if(t===this.er[n].Rh)return n;if(t<this.er[n].Rh)return i?n:null}return null},t.prototype.dr=function(t){var i=this.er;if(!i.length)return null;if(Number.isNaN(t.Rh))return null;var n=i.length-1;if(t>=i[n])return n;var e=0,s=i[e];if(t<s)return null;if(t===s)return e;for(;n>e+1;){var r=e+n>>1,h=i[r];if(h.Rh>t.Rh)n=r;else{if(!(h.Rh<t.Rh))return h.Rh===t.Rh?r:null;e=r}}return e},t.prototype.lr=function(t){return 0<=t&&t<this.or()?t:null},t.prototype.vr=function(t){return 0<=t&&t<this.or()?t:null},t}(),zt=function(){function t(t){this.wr=t}return t.prototype.Mr=function(){return null===this.wr?null:new Ot(Math.floor(this.wr.ph()),Math.ceil(this.wr.gh()))},t.prototype.br=function(){return this.wr},t.prototype.Gn=function(){return null!==this.wr},t.mr=function(){return new t(null)},t}();!function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(Pt||(Pt={}));var It=function(){function t(t,i,n){this.pr=0,this.gr=null,this.yr=new Zt,this.as=null,this.os=null,this.kr=new Ft,this.Nr=new Map,this.xr=zt.mr(),this.Sr=!0,this.Dr=new rt,this.Tr=new rt,this.Cr=new rt,this.Er=null,this.Ar=null,this.Lr=null,this.Br=[],this.Si=i,this._s=n,this.Vr=i.rightOffset,this.zr=i.barSpacing,this.ni=t,this.Fr()}return t.prototype.O=function(){return this.Si},t.prototype.Pr=function(t){g(this._s,t),this.Or(),this.Fr()},t.prototype.ms=function(t,i){g(this.Si,t),this.Si.fixLeftEdge?this.Ir():this.Er=null,void 0!==t.barSpacing&&this.Wr(t.barSpacing),void 0!==t.rightOffset&&this.Rr(t.rightOffset),this.Or(),this.Fr(),this.Cr.an()},t.prototype.Gt=function(){return 0===this.pr||0===this.yr.or()},t.prototype.Ur=function(){return this.jr(),this.xr.Mr()},t.prototype.qr=function(){return this.jr(),this.xr.br()},t.prototype.Hr=function(){var t=this.Ur();if(null===t)return null;var i={from:t.ph(),to:t.gh()};return this.Yr(i)},t.prototype.Yr=function(t){var i=Math.round(t.from),n=Math.round(t.to),e=this.ni.U().Kr(),s=y(e.ar()),r=y(e.Yi());return{from:y(e.cr(Math.max(s,i))),to:y(e.cr(Math.min(r,n)))}},t.prototype.$r=function(t){var i=this.ni.U().Kr();return{from:y(i._r(t.from.Rh,!0)),to:y(i._r(t.to.Rh,!0))}},t.prototype.Xr=function(){return this.kr},t.prototype.Kr=function(){return this.yr},t.prototype.dt=function(){return this.pr},t.prototype.Zr=function(t){if(isFinite(t)&&!(t<=0)&&this.pr!==t){if(this.Si.lockVisibleTimeRangeOnResize&&this.pr){var i=this.zr*t/this.pr;this.Jr(i)}if(null!==this.Er&&y(this.Ur()).ph()<=this.Er){var n=this.pr-t;this.Vr-=Math.round(n/this.zr)+1}this.pr=t,this.Sr=!0,this.Gr(),this.Qr()}},t.prototype.J=function(t){if(this.Gt()||!b(t))return 0;var i=this.te()+this.Vr-t;return this.pr-(i+.5)*this.zr},t.prototype.ie=function(t,i){for(var n=this.te(),e=void 0===i?0:i.from,s=void 0===i?t.length:i.to,r=e;r<s;r++){var h=t[r].F,o=n+this.Vr-h,u=this.pr-(o+.5)*this.zr;t[r].m=u}},t.prototype.si=function(t){return this.kr.sr(t)},t.prototype.ne=function(t){return Math.ceil(this.se(t))},t.prototype.Rr=function(t){this.Sr=!0,this.Vr=t,this.Qr(),this.ni.he(),this.ni.ee()},t.prototype.ue=function(){return this.zr},t.prototype.Wr=function(t){this.Jr(t),this.Qr(),this.ni.he(),this.ni.ee()},t.prototype.oe=function(){return this.Vr},t.prototype.qn=function(){if(this.Gt())return null;if(null!==this.Lr)return this.Lr;for(var t=this.zr,i=5*(this.ni.O().layout.fontSize+4),n=Math.round(i/t),e=y(this.Ur()),s=Math.max(e.ph(),e.ph()-n),r=Math.max(e.gh(),e.gh()-n),h=0,o=0,u=this.kr.rr(t,i);o<u.length;o++){var l=u[o];if(s<=l.Bi&&l.Bi<=r){var a=this.kr.sr(l.Bi);if(null!==a){if(h<this.Br.length){var c=this.Br[h];c.Wn=this.J(l.Bi),c.Rn=this.ae(a,l.ir),c.ir=l.ir,c.le=!1}else this.Br.push({Wn:this.J(l.Bi),Rn:this.ae(a,l.ir),ir:l.ir,le:!1});h++}}}return this.Br.length=h,this.Lr=this.Br,this.Br},t.prototype.tr=function(){this.Sr=!0,this.yr=new Zt,this.as=null,this.os=null,this.fe(),this.kr.tr(),this.Er=null},t.prototype.ce=function(){this.Sr=!0,this.Wr(this.Si.barSpacing),this.Rr(this.Si.rightOffset)},t.prototype.ve=function(){return this.Si.fixLeftEdge},t.prototype._e=function(t){this.Sr=!0,this.gr=t,this.Qr(),this.Ir()},t.prototype.de=function(t,i){var n=this.se(t),e=this.ue(),s=e+i*(e/10);this.Wr(s),this.Si.rightBarStaysOnScroll||this.Rr(this.oe()+(n-this.se(t)))},t.prototype.sh=function(t){this.as&&this.oh(),null===this.os&&null===this.Ar&&(this.Gt()||(this.os=t,this.we()))},t.prototype.hh=function(t){if(null!==this.Ar){var i=ot(this.pr-t,0,this.pr),n=ot(this.pr-y(this.os),0,this.pr);0!==i&&0!==n&&this.Wr(this.Ar.ue*i/n)}},t.prototype.rh=function(){null!==this.os&&(this.os=null,this.fe())},t.prototype.eh=function(t){null===this.as&&null===this.Ar&&(this.Gt()||(this.as=t,this.we()))},t.prototype.uh=function(t){if(null!==this.as){var i=(this.as-t)/this.ue();this.Vr=y(this.Ar).oe+i,this.Sr=!0,this.Qr()}},t.prototype.oh=function(){null!==this.as&&(this.as=null,this.fe())},t.prototype.Me=function(){this.be(this.Si.rightOffset)},t.prototype.be=function(t,i){var n=this;if(void 0===i&&(i=400),!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(i)||i<=0)throw new RangeError("animationDuration (optional) must be finite positive number");var e=this.Vr,s=(new Date).getTime(),r=function(){var h=((new Date).getTime()-s)/i,o=h>=1,u=o?t:e+(t-e)*h;n.Rr(u),o||setTimeout(r,20)};r()},t.prototype.B=function(t,i,n){if(this.Sr=!0,i.length>0){var e=this.yr.or();this.yr.gn(t,i),this.Vr<0&&this.yr.or()===e+1&&(this.Vr-=1)}this.kr.gn(n),this.Qr()},t.prototype.me=function(){return this.Dr},t.prototype.pe=function(){return this.Tr},t.prototype.ge=function(){return this.Cr},t.prototype.te=function(){return this.gr||0},t.prototype.ye=function(t){var i=t.Yh();this.Jr(this.pr/i),this.Vr=t.gh()-this.te(),this.Qr(),this.Sr=!0,this.ni.he(),this.ni.ee()},t.prototype.ke=function(){var t=this.yr.ar(),i=this.yr.Yi();null!==t&&null!==i&&this.ye(new Ot(t,i+this.Si.rightOffset))},t.prototype.Ne=function(t){var i=new Ot(t.from,t.to);this.ye(i)},t.prototype.hi=function(t){return void 0!==this._s.timeFormatter?this._s.timeFormatter(t.Wh||t.Rh):this.xe.Gi(new Date(1e3*t.Rh))},t.prototype.Se=function(t){return(this.pr+1-t)/this.zr},t.prototype.se=function(t){var i=this.Se(t),n=this.te()+this.Vr-i;return Math.round(1e6*n)/1e6},t.prototype.Jr=function(t){var i=this.zr;this.zr=t,this.Gr(),i!==this.zr&&(this.Sr=!0,this.De())},t.prototype.jr=function(){if(this.Sr)if(this.Sr=!1,this.Gt())this.Te(zt.mr());else{var t=this.te(),i=this.pr/this.zr,n=this.Vr+t,e=new Ot(n-i+1,n);this.Te(new zt(e))}},t.prototype.Gr=function(){if(this.zr<.5&&(this.zr=.5,this.Sr=!0),0!==this.pr){var t=.5*this.pr;this.zr>t&&(this.zr=t,this.Sr=!0)}},t.prototype.Qr=function(){var t=this.Ce();this.Vr>t&&(this.Vr=t,this.Sr=!0);var i=this.Ee();null!==i&&this.Vr<i&&(this.Vr=i,this.Sr=!0)},t.prototype.Ee=function(){var t=this.yr.ar(),i=this.gr;if(null===t||null===i)return null;if(null!==this.Er){var n=this.pr/this.zr;return this.Er-i+n-1}return t-i-1+Math.min(2,this.yr.or())},t.prototype.Ce=function(){return this.pr/this.zr-Math.min(2,this.yr.or())},t.prototype.we=function(){this.Ar={ue:this.ue(),oe:this.oe()}},t.prototype.fe=function(){this.Ar=null},t.prototype.ae=function(t,i){var n=this,e=this.Nr.get(i);return void 0===e&&(e=new Rt(function(t){return n.Ae(t,i)}),this.Nr.set(i,e)),e.Gi(t)},t.prototype.Ae=function(t,i){var n,e,s=this.Si.timeVisible;return e=i<20&&s?this.Si.secondsVisible?4:3:i<40&&s?3:i<50||i<60?2:i<70?1:0,void 0!==this.Si.tickMarkFormatter?this.Si.tickMarkFormatter(null!==(n=t.Wh)&&void 0!==n?n:t.Rh,e,this._s.locale):function(t,i,n){var e={};switch(i){case 0:e.year="numeric";break;case 1:e.month="short";break;case 2:e.day="numeric";break;case 3:e.hour12=!1,e.hour="2-digit",e.minute="2-digit";break;case 4:e.hour12=!1,e.hour="2-digit",e.minute="2-digit",e.second="2-digit"}var s=void 0===t.Wh?new Date(1e3*t.Rh):new Date(Date.UTC(t.Wh.year,t.Wh.month-1,t.Wh.day));return new Date(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()).toLocaleString(n,e)}(t,e,this._s.locale)},t.prototype.Te=function(t){var i=this.xr;this.xr=t,kt(i.Mr(),this.xr.Mr())||this.Dr.an(),kt(i.br(),this.xr.br())||this.Tr.an(),this.De()},t.prototype.De=function(){this.Lr=null},t.prototype.Or=function(){this.De(),this.Nr.clear()},t.prototype.Fr=function(){var t=this._s.dateFormat;this.Si.timeVisible?this.xe=new Dt({Sh:t,Dh:this.Si.secondsVisible?"%h:%m:%s":"%h:%m",Th:"   ",Ch:this._s.locale}):this.xe=new Bt(t,this._s.locale)},t.prototype.Ir=function(){if(this.Si.fixLeftEdge){var t=this.yr.ar();if(null!==t&&this.Er!==t){this.Er=t;var i=y(this.Ur()).ph()-t;if(i<0){var n=this.Vr-i-1;this.Rr(n)}}}},t}();function Ut(t){return!m(t)&&!M(t)}function Wt(t){return m(t)}function At(t,i,n){return void 0!==n?n+=" ":n="",void 0===i&&(i="'Trebuchet MS', Roboto, Ubuntu, sans-serif"),""+n+t+"px "+i}var Yt=function(){function t(t){this.Le={xt:1,Nt:4,Bt:NaN,gt:"",Be:"",et:"",Dt:0,Tt:0,Ct:0,St:0,Lt:0},this.A=t}return t.prototype.O=function(){var t=this.Le,i=this.Ve(),n=this.ze();return t.Bt===i&&t.Be===n||(t.Bt=i,t.Be=n,t.gt=At(i,n),t.St=Math.floor(i/3.5),t.Dt=t.St,t.Tt=Math.max(Math.ceil(i/2-t.Nt/2),0),t.Ct=Math.ceil(i/2+t.Nt/2),t.Lt=Math.round(i/10)),t.et=this.Fe(),this.Le},t.prototype.Fe=function(){return this.A.O().layout.textColor},t.prototype.Ve=function(){return this.A.O().layout.fontSize},t.prototype.ze=function(){return this.A.O().layout.fontFamily},t}();function Ht(t){return"left"===t||"right"===t}var Kt=function(){function t(){this.G=null}return t.prototype.v=function(t){this.G=t},t.prototype.s=function(t,i,n,e){var s=this;if(null!==this.G){var r=Math.floor(i);t.lineWidth=r;var h=Math.ceil(this.G.ht*i),o=Math.ceil(this.G.st*i);!function(t,i){t.save(),t.lineWidth%2&&t.translate(.5,.5),i(),t.restore()}(t,function(){var n=y(s.G);if(n.Pe){t.strokeStyle=n.Oe,u(t,n.Ie),t.beginPath();for(var e=0,l=n.We;e<l.length;e++){var a=l[e],c=Math.round(a.Wn*i);t.moveTo(c,-r),t.lineTo(c,h+r)}t.stroke()}if(n.Re){t.strokeStyle=n.Ue,u(t,n.je),t.beginPath();for(var f=0,p=n.qe;f<p.length;f++){var v=p[f],d=Math.round(v.Wn*i);t.moveTo(-r,d),t.lineTo(o+r,d)}t.stroke()}})}},t}(),qt=function(){function t(t){this.at=new Kt,this.C=!0,this.wi=t}return t.prototype.B=function(){this.C=!0},t.prototype.I=function(t,i){if(this.C){var n=this.wi.ct().O().grid,e={ht:t,st:i,Re:n.horzLines.visible,Pe:n.vertLines.visible,Ue:n.horzLines.color,Oe:n.vertLines.color,je:n.horzLines.style,Ie:n.vertLines.style,qe:this.wi.Ci().qn(),We:this.wi.ct().U().qn()||[]};this.at.v(e),this.C=!1}return this.at},t}(),Xt=function(){function t(){this.He=new WeakMap,this.C=!0}return t.prototype._i=function(t){var i=this.He.get(t);return void 0===i&&(i=[new qt(t)],this.He.set(t,i)),this.C&&(i.forEach(function(t){return t.B()}),this.C=!1),i},t.prototype.Ye=function(){this.C=!0},t}(),jt=function(){function t(t){this.Ke=new Map,this.$e=!1,this.Xe=!1,this.wr=null,this.Ze=t}return t.prototype.Je=function(t,i){var n=function(t,i){return void 0===t?i:{Ge:Math.max(t.Ge,i.Ge),Ts:t.Ts||i.Ts}}(this.Ke.get(t),i);this.Ke.set(t,n)},t.prototype.Qe=function(t){this.Ze=Math.max(this.Ze,t)},t.prototype.tu=function(){return this.Ze},t.prototype.iu=function(t){var i=this.Ke.get(t);return void 0===i?{Ge:this.Ze}:{Ge:Math.max(this.Ze,i.Ge),Ts:i.Ts}},t.prototype.nu=function(){this.Xe=!0,this.wr=null},t.prototype.su=function(){return this.Xe},t.prototype.Ne=function(t){this.wr=t,this.Xe=!1},t.prototype.hu=function(){return this.wr},t.prototype.gn=function(t){var i=this;this.$e=this.$e||t.$e,t.Xe&&this.nu(),t.wr&&this.Ne(t.wr),this.Ze=Math.max(this.Ze,t.Ze),t.Ke.forEach(function(t,n){i.Je(n,t)})},t}(),$t=function(){function t(t){this.ru=t}return t.prototype.Gi=function(t){var i="";return t<0&&(i="-",t=-t),t<995?i+this.eu(t):t<999995?i+this.eu(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),i+this.eu(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),i+this.eu(t/1e9)+"B")},t.prototype.eu=function(t){var i=Math.pow(10,this.ru);return((t=Math.round(t*i)/i)>=1e-15&&t<1?t.toFixed(this.ru).replace(/\.?0+$/,""):String(t)).replace(/(\.[1-9]*)0+$/,function(t,i){return i})},t}();function Jt(t,i,n,e){if(0!==i.length){var s=i[e.from].m,r=i[e.from].p;t.moveTo(s,r);for(var h=e.from+1;h<e.to;++h){var o=i[h];if(1===n){var u=i[h-1].p,l=o.m;t.lineTo(l,u)}t.lineTo(o.m,o.p)}}}var Qt=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.l=null,i}return c(i,t),i.prototype.v=function(t){this.l=t},i.prototype.h=function(t){if(null!==this.l&&0!==this.l.M.length&&null!==this.l._){t.lineCap="butt",t.strokeStyle=this.l.N,t.lineWidth=this.l.rt,u(t,this.l.ut),t.lineWidth=1,t.beginPath(),t.moveTo(this.l.M[this.l._.from].m,this.l.uu),t.lineTo(this.l.M[this.l._.from].m,this.l.M[this.l._.from].p),Jt(t,this.l.M,this.l.ou,this.l._),this.l._.to>this.l._.from&&(t.lineTo(this.l.M[this.l._.to-1].m,this.l.uu),t.lineTo(this.l.M[this.l._.from].m,this.l.uu)),t.closePath();var i=t.createLinearGradient(0,0,0,this.l.uu);i.addColorStop(0,this.l.au),i.addColorStop(1,this.l.lu),t.fillStyle=i,t.fill()}},i}(D),ti=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.l=null,i}return c(i,t),i.prototype.v=function(t){this.l=t},i.prototype.h=function(t){null!==this.l&&0!==this.l.M.length&&null!==this.l._&&(t.lineCap="square",t.lineWidth=this.l.rt,u(t,this.l.ut),t.strokeStyle=this.l.N,t.lineJoin="miter",t.beginPath(),Jt(t,this.l.M,this.l.ou,this.l._),t.stroke())},i}(D);function ii(t,i,n,e,s){void 0===e&&(e=0),void 0===s&&(s=t.length);for(var r=s-e;0<r;){var h=r>>1,o=e+h;n(t[o],i)?(e=o+1,r-=h+1):r=h}return e}function ni(t,i,n,e,s){void 0===e&&(e=0),void 0===s&&(s=t.length);for(var r=s-e;0<r;){var h=r>>1,o=e+h;n(i,t[o])?r=h:(e=o+1,r-=h+1)}return e}function ei(t,i){return t.F<i}function si(t,i){return t<i.F}function ri(t,i,n){var e=i.ph(),s=i.gh(),r=ii(t,e,ei),h=ni(t,s,si);if(!n)return{from:r,to:h};var o=r,u=h;return r>0&&r<t.length&&t[r].F>=e&&(o=r-1),h>0&&h<t.length&&t[h-1].F<=s&&(u=h+1),{from:o,to:u}}var hi=function(){function t(t,i,n){this.fu=!0,this.cu=!0,this.vu=[],this._u=null,this.du=t,this.wu=i,this.Mu=n}return t.prototype.B=function(t){this.fu=!0,"data"===t&&(this.cu=!0)},t.prototype.bu=function(){this.cu&&(this.mu(),this.cu=!1),this.fu&&(this.pu(),this.fu=!1)},t.prototype.gu=function(){this._u=null},t.prototype.pu=function(){var t=this.du.X(),i=this.wu.U();if(this.gu(),!i.Gt()&&!t.Gt()){var n=i.Ur();if(null!==n&&0!==this.du.Ki().or()){var e=this.du.q();null!==e&&(this._u=ri(this.vu,n,this.Mu),this.yu(t,i,e.Z))}}},t}(),oi=function(t){function i(i,n){return t.call(this,i,n,!0)||this}return c(i,t),i.prototype.yu=function(t,i,n){i.ie(this.vu,G(this._u)),t.Us(this.vu,n,G(this._u))},i.prototype.ku=function(t,i){return{F:t,P:i,m:NaN,p:NaN}},i.prototype.mu=function(){var t=this,i=this.du.Nu(),n=[],e=this.du.K();this.du.Ki().xu(function(s,r){var h=i(r.Z),o=t.Su(s,h,e);return n.push(o),!1}),this.vu=n},i}(hi),ui=function(t){function i(i,n){var e=t.call(this,i,n)||this;return e.at=new L,e.Du=new Qt,e.Tu=new ti,e.at.i([e.Du,e.Tu]),e}return c(i,t),i.prototype.I=function(t,i){this.bu();var n=this.du.O(),e={ou:n.lineType,M:this.vu,N:n.lineColor,ut:n.lineStyle,rt:n.lineWidth,au:n.topColor,lu:n.bottomColor,uu:t,_:this._u};return this.Du.v(e),this.Tu.v(e),this.at},i.prototype.Su=function(t,i){return this.ku(t,i)},i}(oi),li=function(){function t(){this.G=null,this.Cu=0,this.Eu=0}return t.prototype.v=function(t){this.G=t},t.prototype.s=function(t,i,n,e){if(null!==this.G&&0!==this.G.Ki.length&&null!==this.G._){this.Cu=Math.max(1,Math.floor(function(t,i){return Math.floor(.3*t*i)}(this.G.ue,i))),this.Cu>=2&&Math.floor(i)%2!=this.Cu%2&&this.Cu--,this.Eu=this.G.Au?Math.min(this.Cu,Math.floor(i)):this.Cu;for(var s=null,r=this.G._.from;r<this.G._.to;++r){var h=this.G.Ki[r];s!==h.et&&(t.fillStyle=h.et,s=h.et);var o=Math.floor(.5*this.Eu),u=Math.round(h.m*i),l=u-o,a=this.Eu,c=l+a-1,f=Math.round(h.Ys*i)-o,p=Math.round(h.Ks*i)+o,v=Math.max(p-f,this.Eu);t.fillRect(l,f,a,v);var d=Math.ceil(1.5*this.Cu);if(this.Eu<=this.Cu){if(this.G.Lu){var y=u-d,w=Math.max(f,Math.round(h.Hs*i)-o),g=w+a-1;g>f+v-1&&(w=(g=f+v-1)-a+1),t.fillRect(y,w,l-y,g-w+1)}var m=u+d,b=Math.max(f,Math.round(h.$s*i)-o),M=b+a-1;M>f+v-1&&(b=(M=f+v-1)-a+1),t.fillRect(c+1,b,m-c,M-b+1)}}}},t}(),ai=function(t){function i(i,n){return t.call(this,i,n,!1)||this}return c(i,t),i.prototype.yu=function(t,i,n){i.ie(this.vu,G(this._u)),t.qs(this.vu,n,G(this._u))},i.prototype.Bu=function(t,i,n){return{F:t,open:i.Z[0],high:i.Z[1],low:i.Z[2],close:i.Z[3],m:NaN,Hs:NaN,Ys:NaN,Ks:NaN,$s:NaN}},i.prototype.mu=function(){var t=this,i=[],n=this.du.K();this.du.Ki().xu(function(e,s){var r=t.Su(e,s,n);return i.push(r),!1}),this.vu=i},i}(hi),ci=function(t){function i(i,n){var e=t.call(this,i,n)||this;return e.at=new li,e}return c(i,t),i.prototype.I=function(t,i){this.bu();var n=this.du.O(),e={Ki:this.vu,ue:this.wu.U().ue(),Lu:n.openVisible,Au:n.thinBars,_:this._u};return this.at.v(e),this.at},i.prototype.Su=function(t,i,n){return f(f({},this.Bu(t,i,n)),{et:n.Y(t).H})},i}(ai),fi=function(){function t(){this.G=null,this.Cu=0}return t.prototype.v=function(t){this.G=t},t.prototype.s=function(t,i,n,e){if(null!==this.G&&0!==this.G.Ki.length&&null!==this.G._){this.Cu=function(t,i){var n=Math.floor(.8*t*i),e=Math.floor(t*i),s=Math.min(n,e-1);return Math.max(1,s)}(this.G.ue,i),this.Cu>=2&&Math.floor(i)%2!=this.Cu%2&&this.Cu--;var s=this.G.Ki;this.G.Vu&&this.zu(t,s,this.G._,i),this.G.Fu&&this.Pu(t,s,this.G._,this.G.ue,i);var r=this.Ou(i);(!this.G.Fu||this.Cu>2*r)&&this.Iu(t,s,this.G._,i)}},t.prototype.zu=function(t,i,n,e){if(null!==this.G){var s="",r=Math.min(Math.floor(e),Math.floor(this.G.ue*e));r=Math.min(r,this.Cu);for(var h=Math.floor(.5*r),o=n.from;o<n.to;o++){var u=i[o];u.Wu!==s&&(t.fillStyle=u.Wu,s=u.Wu);var l=Math.round(Math.min(u.Hs,u.$s)*e),a=Math.round(Math.max(u.Hs,u.$s)*e),c=Math.round(u.Ys*e),f=Math.round(u.Ks*e),p=Math.round(e*u.m);t.fillRect(p-h,c,r,l-c),t.fillRect(p-h,a+1,r,f-a)}}},t.prototype.Ou=function(t){var i=Math.floor(1*t);this.Cu<=2*i&&(i=Math.floor(.5*(this.Cu-1)));var n=Math.max(1,i);return this.Cu<=2*n?Math.floor(1*t):n},t.prototype.Pu=function(t,i,n,e,s){for(var r="",h=this.Ou(s),o=n.from;o<n.to;o++){var u=i[o];u.Pt!==r&&(t.fillStyle=u.Pt,r=u.Pt);var l=Math.round(u.m*s)-Math.floor(.5*this.Cu),a=l+this.Cu-1,c=Math.round(Math.min(u.Hs,u.$s)*s),f=Math.round(Math.max(u.Hs,u.$s)*s);e>2*h?A(t,l,c,a-l+1,f-c+1,h):t.fillRect(l,c,a-l+1,f-c+1)}},t.prototype.Iu=function(t,i,n,e){if(null!==this.G)for(var s="",r=this.Ou(e),h=n.from;h<n.to;h++){var o=i[h],u=Math.round(Math.min(o.Hs,o.$s)*e),l=Math.round(Math.max(o.Hs,o.$s)*e),a=Math.round(o.m*e)-Math.floor(.5*this.Cu),c=a+this.Cu-1;if(this.G.Fu&&(a+=r,u+=r,c-=r,l-=r),!(u>l)){if(o.et!==s){var f=o.et;t.fillStyle=f,s=f}t.fillRect(a,u,c-a+1,l-u+1)}}},t}(),pi=function(t){function i(i,n){var e=t.call(this,i,n)||this;return e.at=new fi,e}return c(i,t),i.prototype.I=function(t,i){this.bu();var n=this.du.O(),e={Ki:this.vu,ue:this.wu.U().ue(),Vu:n.wickVisible,Fu:n.borderVisible,_:this._u};return this.at.v(e),this.at},i.prototype.Su=function(t,i,n){var e=n.Y(t);return f(f({},this.Bu(t,i,n)),{et:e.H,Wu:e.Ru,Pt:e.Uu})},i}(ai),vi=function(){function t(){this.G=null,this.ju=[]}return t.prototype.v=function(t){this.G=t,this.ju=[]},t.prototype.s=function(t,i,n,e){if(null!==this.G&&0!==this.G.M.length&&null!==this.G._){this.ju.length||this.qu(i);for(var s=Math.round(this.G.Hu*i),r=Math.max(1,Math.floor(i)),h=this.G._.from;h<this.G._.to;h++){var o=this.G.M[h],u=this.ju[h-this.G._.from],l=Math.round(o.p*i);t.fillStyle=o.et,t.fillRect(u.ph,l,u.gh-u.ph+1,s-l+r)}}},t.prototype.qu=function(t){if(null!==this.G&&0!==this.G.M.length&&null!==this.G._){var i=Math.ceil(this.G.ue*t)<=3?0:Math.max(1,Math.floor(t)),n=Math.round(this.G.ue*t)-i;this.ju=new Array(this.G._.to-this.G._.from);for(var e=this.G._.from;e<this.G._.to;e++){var s,r=this.G.M[e],h=Math.round(r.m*t),o=void 0,u=void 0;n%2?(o=h-(s=(n-1)/2),u=h+s):(o=h-(s=n/2),u=h+s-1),this.ju[e-this.G._.from]={ph:o,gh:u,Yu:h,Ku:r.m*t,F:r.F}}for(e=this.G._.from+1;e<this.G._.to;e++){var l=this.ju[e-this.G._.from],a=this.ju[e-this.G._.from-1];l.F===a.F+1&&l.ph-a.gh!==i+1&&(a.Yu>a.Ku?a.gh=l.ph-i-1:l.ph=a.gh+i+1)}var c=Math.ceil(this.G.ue*t);for(e=this.G._.from;e<this.G._.to;e++){(l=this.ju[e-this.G._.from]).gh<l.ph&&(l.gh=l.ph);var f=l.gh-l.ph+1;c=Math.min(f,c)}if(i>0&&c<4)for(e=this.G._.from;e<this.G._.to;e++)(f=(l=this.ju[e-this.G._.from]).gh-l.ph+1)>c&&(l.Yu>l.Ku?l.gh-=1:l.ph+=1)}else this.ju=[]},t}();function di(t){return{M:[],ue:t,Hu:NaN,_:null}}var yi=function(t){function i(i,n){var e=t.call(this,i,n,!1)||this;return e.S=new L,e.$u=di(0),e.Xu=new Int32Array(0),e.at=new vi,e}return c(i,t),i.prototype.I=function(t,i){return this.bu(),this.S},i.prototype.mu=function(){var t=this,i=this.wu.U().ue(),n=this.du.Zu();this.$u=di(i);var e=this.du.Nu();this.Xu=new Int32Array(this.du.Ki().or());var s=0,r=0,h=0,o=this.du.O().color;this.du.Ki().xu(function(i,u){var l=e(u.Z),a=u.Z[4],c=function(t,i,n){return{F:t,P:i,m:NaN,p:NaN,et:n}}(i,l,null!=a?n.Ju(a):o),f=null==a?0:a+1;return++r<t.$u.M.length?t.$u.M[r]=c:t.$u.M.push(c),t.vu[h++]={F:i,m:0},t.Xu[s++]=f,!1}),this.at.v(this.$u),this.S.i([this.at])},i.prototype.gu=function(){t.prototype.gu.call(this),this.$u._=null},i.prototype.yu=function(t,i,n){if(null!==this._u){var e=i.ue(),s=y(i.Ur()),r=t.$(this.du.O().base,n);i.ie(this.$u.M),t.Us(this.$u.M,n),this.$u.Hu=r,this.$u._=ri(this.$u.M,s,!1),this.$u.ue=e,this.at.v(this.$u)}},i}(hi),wi=function(t){function i(i,n){var e=t.call(this,i,n)||this;return e.Tu=new ti,e}return c(i,t),i.prototype.I=function(t,i){this.bu();var n=this.du.O(),e={M:this.vu,N:n.color,ut:n.lineStyle,ou:n.lineType,rt:n.lineWidth,_:this._u};return this.Tu.v(e),this.Tu},i.prototype.Su=function(t,i){return this.ku(t,i)},i}(oi),gi=/[2-9]/g,mi=function(){function t(t){void 0===t&&(t=50),this.Bh=0,this.Vh=1,this.zh=1,this.Ph={},this.Fh={},this.Ih=t}return t.prototype.tr=function(){this.Bh=0,this.Fh={},this.Vh=1,this.zh=1,this.Ph={}},t.prototype.At=function(t,i,n){var e=n||gi,s=String(i).replace(e,"0");if(this.Fh[s])return this.Fh[s].dt;if(this.Bh===this.Ih){var r=this.Ph[this.zh];delete this.Ph[this.zh],delete this.Fh[r],this.zh++,this.Bh--}var h=t.measureText(s).width;return 0===h&&i.length?0:(this.Fh[s]={dt:h,jh:this.Vh},this.Ph[this.Vh]=s,this.Bh++,this.Vh++,h)},t}(),bi=function(){function t(t){this.Gu=null,this.Le=null,this.Qu="right",this.pr=0,this.io=t}return t.prototype.no=function(t,i,n,e){this.Gu=t,this.Le=i,this.pr=n,this.Qu=e},t.prototype.s=function(t,i){null!==this.Le&&null!==this.Gu&&this.Gu.s(t,this.Le,this.io,this.pr,this.Qu,i)},t}(),Mi=function(){function t(t,i,n){this.so=t,this.io=new mi(50),this.ho=i,this.A=n,this.Ve=-1,this.at=new bi(this.io)}return t.prototype.B=function(){this.so.B()},t.prototype.I=function(t,i){var n=this.A.ro(this.ho);if(null===n)return null;var e=n.eo(this.ho)?n.Ci():this.ho.X();if(null===e)return null;var s=n.uo(e);if("overlay"===s)return null;var r=this.A.oo();return r.Bt!==this.Ve&&(this.Ve=r.Bt,this.io.tr()),this.at.no(this.so.$t(),r,i,s),this.at},t}(),_i=function(){function t(){this.G=null}return t.prototype.v=function(t){this.G=t},t.prototype.s=function(t,i,n,e){if(null!==this.G&&!1!==this.G.tt){var s=Math.round(this.G.p*i);if(!(s<0||s>Math.ceil(this.G.wt*i))){var r=Math.ceil(this.G.dt*i);t.lineCap="butt",t.strokeStyle=this.G.et,t.lineWidth=Math.floor(this.G.rt*i),u(t,this.G.ut),l(t,s,0,r)}}},t}(),Si=function(){function t(t){this.ao={dt:0,wt:0,p:0,et:"rgba(0, 0, 0, 0)",rt:1,ut:0,tt:!1},this.lo=new _i,this.C=!0,this.du=t,this.wu=t.ct(),this.lo.v(this.ao)}return t.prototype.B=function(){this.C=!0},t.prototype.I=function(t,i){return this.C&&(this.fo(t,i),this.C=!1),this.lo},t}(),Ci=function(t){function i(i){return t.call(this,i)||this}return c(i,t),i.prototype.fo=function(t,i){this.ao.tt=!1;var n=this.du.X(),e=n.ys().ys;if(2===e||3===e){var s=this.du.O();if(s.baseLineVisible){var r=this.du.q();null!==r&&(this.ao.tt=!0,this.ao.p=n.$(r.Z,r.Z),this.ao.dt=i,this.ao.wt=t,this.ao.et=s.baseLineColor,this.ao.rt=s.baseLineWidth,this.ao.ut=s.baseLineStyle)}}},i}(Si);function xi(t,i){return ct(Math.min(Math.max(t,12),30)*i)}function Gi(t,i){switch(t){case"arrowDown":case"arrowUp":return xi(i,1);case"circle":return xi(i,.8);case"square":return xi(i,.7)}}function Ti(t){return at(xi(t,1))}function Ei(t){return Math.max(xi(t,.1),3)}function Bi(t,i,n,e,s){var r=Gi("square",n),h=(r-1)/2,o=t-h,u=i-h;return e>=o&&e<=o+r&&s>=u&&s<=u+r}function Vi(t,i,n,e,s){var r=(Gi("arrowUp",s)-1)/2,h=(ct(s/2)-1)/2;i.beginPath(),t?(i.moveTo(n-r,e),i.lineTo(n,e-r),i.lineTo(n+r,e),i.lineTo(n+h,e),i.lineTo(n+h,e+r),i.lineTo(n-h,e+r),i.lineTo(n-h,e)):(i.moveTo(n-r,e),i.lineTo(n,e+r),i.lineTo(n+r,e),i.lineTo(n+h,e),i.lineTo(n+h,e-r),i.lineTo(n-h,e-r),i.lineTo(n-h,e)),i.fill()}var Li=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.G=null,i.io=new mi,i.Ve=-1,i.ze="",i.co="",i}return c(i,t),i.prototype.v=function(t){this.G=t},i.prototype.no=function(t,i){this.Ve===t&&this.ze===i||(this.Ve=t,this.ze=i,this.co=At(t,i),this.io.tr())},i.prototype.vo=function(t,i){if(null===this.G||null===this.G._)return null;for(var n=this.G._.from;n<this.G._.to;n++){var e=this.G.M[n];if(Ri(e,t,i))return{_o:e.do,wo:e.wo}}return null},i.prototype.h=function(t,i,n){if(null!==this.G&&null!==this.G._){t.textBaseline="middle",t.font=this.co;for(var e=this.G._.from;e<this.G._.to;e++){var s=this.G.M[e];void 0!==s.Et&&(s.Et.dt=this.io.At(t,s.Et.Mo),s.Et.wt=this.Ve),Di(s,t)}}},i}(D);function Di(t,i){i.fillStyle=t.et,void 0!==t.Et&&function(t,i,n,e){t.fillText(i,n,e)}(i,t.Et.Mo,t.m-t.Et.dt/2,t.Et.p),function(t,i){if(0!==t.or){switch(t.bo){case"arrowDown":return void Vi(!1,i,t.m,t.p,t.or);case"arrowUp":return void Vi(!0,i,t.m,t.p,t.or);case"circle":return void function(t,i,n,e){var s=(Gi("circle",e)-1)/2;t.beginPath(),t.arc(i,n,s,0,2*Math.PI,!1),t.fill()}(i,t.m,t.p,t.or);case"square":return void function(t,i,n,e){var s=Gi("square",e),r=(s-1)/2,h=i-r,o=n-r;t.fillRect(h,o,s,s)}(i,t.m,t.p,t.or)}t.bo}}(t,i)}function Ri(t,i,n){return!(void 0===t.Et||!function(t,i,n,e,s,r){var h=e/2;return s>=t&&s<=t+n&&r>=i-h&&r<=i+h}(t.m,t.Et.p,t.Et.dt,t.Et.wt,i,n))||function(t,i,n){if(0===t.or)return!1;switch(t.bo){case"arrowDown":case"arrowUp":return function(t,i,n,e,s,r){return Bi(i,n,e,s,r)}(0,t.m,t.p,t.or,i,n);case"circle":return function(t,i,n,e,s){var r=2+Gi("circle",n)/2,h=t-e,o=i-s;return Math.sqrt(h*h+o*o)<=r}(t.m,t.p,t.or,i,n);case"square":return Bi(t.m,t.p,t.or,i,n)}t.bo}(t,i,n)}function Oi(t,i,n,e,s,r,h,o,u){var l=m(n)?n:n.close,a=m(n)?n:n.high,c=m(n)?n:n.low,f=m(i.size)?Math.max(i.size,0):1,p=Ti(o.ue())*f,v=p/2;switch(t.or=p,i.position){case"inBar":return t.p=h.$(l,u),void(void 0!==t.Et&&(t.Et.p=t.p+v+r+.6*s));case"aboveBar":return t.p=h.$(a,u)-v-e.mo,void 0!==t.Et&&(t.Et.p=t.p-v-.6*s,e.mo+=1.2*s),void(e.mo+=p+r);case"belowBar":return t.p=h.$(c,u)+v+e.po,void 0!==t.Et&&(t.Et.p=t.p+v+r+.6*s,e.po+=1.2*s),void(e.po+=p+r)}i.position}var ki=function(){function t(t,i){this.C=!0,this.yo=!0,this.ko=!0,this.No=null,this.at=new Li,this.xo=t,this.ni=i,this.G={M:[],_:null}}return t.prototype.B=function(t){this.C=!0,this.ko=!0,"data"===t&&(this.yo=!0)},t.prototype.I=function(t,i,n){this.C&&this.bu();var e=this.ni.O().layout;return this.at.no(e.fontSize,e.fontFamily),this.at.v(this.G),this.at},t.prototype.So=function(){if(this.ko){if(this.xo.Do().length>0){var t=this.ni.U().ue(),i=Ei(t),n=1.5*Ti(t)+2*i;this.No={above:n,below:n}}else this.No=null;this.ko=!1}return this.No},t.prototype.bu=function(){var t=this.xo.X(),i=this.ni.U(),n=this.xo.Do();this.yo&&(this.G.M=n.map(function(t){return{F:t.time,m:0,p:0,or:0,bo:t.shape,et:t.color,do:t.do,wo:t.id,Et:void 0}}),this.yo=!1);var e=this.ni.O().layout;this.G._=null;var s=i.Ur();if(null!==s){var r=this.xo.q();if(null!==r&&0!==this.G.M.length){var h=NaN,o=Ei(i.ue()),u={mo:o,po:o};this.G._=ri(this.G.M,s,!0);for(var l=this.G._.from;l<this.G._.to;l++){var a=n[l];a.time!==h&&(u.mo=o,u.po=o,h=a.time);var c=this.G.M[l];c.m=i.J(a.time),void 0!==a.text&&a.text.length>0&&(c.Et={Mo:a.text,p:0,dt:0,wt:0});var f=this.xo.To(a.time);null!==f&&Oi(c,a,f,u,e.fontSize,o,t,i,r.Z)}this.C=!1}}},t}(),Ni=function(t){function i(i){return t.call(this,i)||this}return c(i,t),i.prototype.fo=function(t,i){var n=this.ao;n.tt=!1;var e=this.du.O();if(e.priceLineVisible){var s=this.du.Co(void 0,0===e.priceLineSource);s.Eo||(n.tt=!0,n.p=s.Vt,n.et=this.du.Ao(s.et),n.dt=i,n.wt=t,n.rt=e.priceLineWidth,n.ut=e.priceLineStyle)}},i}(Si),Pi=function(t){function i(i,n){var e=t.call(this)||this;return e.lt=i,e.G=n,e}return c(i,t),i.prototype.Lo=function(){return this.G},i.prototype.Xt=function(t,i,n){t.tt=!1,i.tt=!1;var e=this.lt.O(),s=e.lastValueVisible,r=""!==this.lt.Bo(),h=0===e.seriesLastValueMode,o=this.lt.Co(void 0,!1);o.Eo||(s&&(t.Et=this.Vo(o,s,h),t.tt=0!==t.Et.length),(r||h)&&(i.Et=this.zo(o,s,r,h),i.tt=i.Et.length>0),n.Ft=this.lt.Ao(o.et),n.et=W(n.Ft),n.Vt=o.Vt,i.Pt=this.lt.ct().O().layout.backgroundColor,t.Pt=n.Ft)},i.prototype.zo=function(t,i,n,e){var s="",r=this.lt.Bo();return n&&0!==r.length&&(s+=r+" "),i&&e&&(s+=this.lt.X().Ss()?t.Fo:t.Po),s.trim()},i.prototype.Vo=function(t,i,n){return i?n?this.lt.X().Ss()?t.Po:t.Fo:t.Et:""},i}(X),Fi=function(){function t(t,i){this.$n=t,this.Oo=i||null}return t.prototype.Os=function(){return this.$n},t.prototype.yh=function(){return this.Oo},t.prototype.Dn=function(){return null===this.$n?null:{priceRange:this.$n.Dn(),margins:this.Oo||void 0}},t.Tn=function(i){return null===i?null:new t(ht.Tn(i.priceRange),i.margins)},t}(),Zi=function(t){function i(i,n){var e=t.call(this,i)||this;return e.Io=n,e}return c(i,t),i.prototype.fo=function(t,i){var n=this.ao;n.tt=!1;var e=this.Io.Wo();if(null!==e){var s=this.Io.O();n.tt=!0,n.p=e,n.et=s.color,n.dt=i,n.wt=t,n.rt=s.lineWidth,n.ut=s.lineStyle}},i}(Si),zi=function(t){function i(i,n){var e=t.call(this)||this;return e.xo=i,e.Io=n,e}return c(i,t),i.prototype.Xt=function(t,i,n){t.tt=!1,i.tt=!1;var e=this.Io.O();if(e.axisLabelVisible){var s=this.Io.Wo();null!==s&&(t.Et=this.xo.X().fh(e.price),t.tt=!0,n.Ft=e.color,n.et=W(e.color),n.Vt=s)}},i}(X),Ii=function(){function t(t,i){this.xo=t,this.Si=i,this.Ro=new Zi(t,this),this.so=new zi(t,this)}return t.prototype.ms=function(t){g(this.Si,t),this.B(),this.xo.ct().ee()},t.prototype.O=function(){return this.Si},t.prototype.Uo=function(){return this.Ro},t.prototype.jo=function(){return this.so},t.prototype.B=function(){this.Ro.B(),this.so.B()},t.prototype.Wo=function(){var t=this.xo,i=t.X();if(t.ct().U().Gt()||i.Gt())return null;var n=t.q();return null===n?null:i.$(this.Si.price,n.Z)},t}(),Ui=function(){function t(){this.qo=0,this.Ho=new Map,this.Yo=new Map}return t.prototype.Ju=function(t){return d(this.Yo.get(t))},t.prototype.Ko=function(t){var i=this.Ho.get(t);return void 0===i&&(i=this.qo++,this.Ho.set(t,i),this.Yo.set(i,t)),i},t.prototype.ur=function(){this.qo=0,this.Ho.clear(),this.Yo.clear()},t.prototype.or=function(){return this.Yo.size},t}(),Wi=function(t){function i(i){var n=t.call(this)||this;return n.ni=i,n}return c(i,t),i.prototype.ct=function(){return this.ni},i.prototype.Mh=function(){return 0},i.prototype.mh=function(t,i){return null},i}(tt),Ai={H:"",Uu:"",Ru:""},Yi=function(){function t(t){this.xo=t}return t.prototype.Y=function(t,i){var n=this.xo.$o(),e=this.xo.O();switch(n){case"Line":return this.Xo(e);case"Area":return this.Zo(e);case"Bar":return this.Jo(e,t,i);case"Candlestick":return this.Go(e,t,i);case"Histogram":return this.Qo(e,t,i)}throw new Error("Unknown chart style")},t.prototype.Jo=function(t,i,n){var e=f({},Ai),s=t.upColor,r=t.downColor,h=s,o=r,u=y(this.ta(i,n)),l=w(u.Z[0])<=w(u.Z[3]);return e.H=l?s:r,e.Uu=l?h:o,e},t.prototype.Go=function(t,i,n){var e=f({},Ai),s=t.upColor,r=t.downColor,h=t.borderUpColor,o=t.borderDownColor,u=t.wickUpColor,l=t.wickDownColor,a=y(this.ta(i,n)),c=w(a.Z[0])<=w(a.Z[3]);return e.H=c?s:r,e.Uu=c?h:o,e.Ru=c?u:l,e},t.prototype.Zo=function(t){return f(f({},Ai),{H:t.lineColor})},t.prototype.Xo=function(t){return f(f({},Ai),{H:t.color})},t.prototype.Qo=function(t,i,n){var e=f({},Ai),s=y(this.ta(i,n)).Z[4];if(null!=s){var r=y(this.xo.Zu());e.H=r.Ju(s)}else e.H=t.color;return e},t.prototype.ia=function(){return this.xo.Ki()},t.prototype.ta=function(t,i){return void 0!==i?i.Z:this.ia().cr(t)},t}(),Hi=function(){function t(t,i){void 0===t&&(t=null),void 0===i&&(i=null),this.er=[],this.na=0,this.sa=0,this.ha=!1,this.ra=new Map,this.ea=new Map,this.ua=new Map,this.oa=t||new Map,this.aa=i}return t.prototype.ur=function(){this.er=[],this.na=0,this.sa=0,this.ha=!1,this.ra.clear(),this.ea.clear(),this.ua.clear()},t.prototype.la=function(){return this.or()>0?this.er[this.na]:null},t.prototype.fa=function(){return this.or()>0?this.er[this.sa-1]:null},t.prototype.ar=function(){return this.or()>0?this.ca(this.na):null},t.prototype.Yi=function(){return this.or()>0?this.ca(this.sa-1):null},t.prototype.or=function(){return this.sa-this.na},t.prototype.Gt=function(){return 0===this.or()},t.prototype.Kh=function(t){return null!==this.va(t,0)},t.prototype.cr=function(t){return this._a(t)},t.prototype.da=function(t,i,n){if(this.ha)return!1;var e={Bi:t,Z:n,F:i},s=this.va(t,0);return this.ea.clear(),this.ua.clear(),null===s?(this.er.splice(this.wa(t),0,e),this.na=0,this.sa=this.er.length,!0):(this.er[s]=e,!1)},t.prototype._a=function(t,i,n){void 0===i&&(i=0);var e=this.va(t,i,n);if(null===e)return null;var s=this.Ma(e);return{Bi:this.ca(e),F:s.F,Z:s.Z}},t.prototype.xu=function(t){for(var i=this.na;i<this.sa&&!t(this.ca(i),this.Ma(i));++i);},t.prototype.ba=function(i,n){var e=new t(this.oa,this.aa);return e.er=this.er,e.na=this.wa(i),e.sa=this.ma(n),e.ha=!0,e},t.prototype.pa=function(t,i,n){if(this.Gt())return null;for(var e=null,s=0,r=n;s<r.length;s++){var h=r[s];e=Ki(e,this.ga(t,i,h))}return e},t.prototype.gn=function(t){return this.ha||0===t.length?null:this.Gt()||t[t.length-1].Bi<this.er[0].Bi?this.ya(t):t[0].Bi>this.er[this.er.length-1].Bi?this.ka(t):1===t.length&&t[0].Bi===this.er[this.er.length-1].Bi?(this.Na(t[0]),t[0]):this.xa(t)},t.prototype.Sa=function(t){if(this.ha)return null;var i=this.va(t,1);if(null===i)return null;var n=this.er.splice(i);return this.sa=this.er.length,this.ra.clear(),this.ea.clear(),this.ua.clear(),n.length>0?n[0]:null},t.prototype.ca=function(t){return this.er[t].Bi},t.prototype.Ma=function(t){return this.er[t]},t.prototype.va=function(t,i,n){var e=this.Da(t);if(null===e&&0!==i)switch(i){case-1:return this.Ta(t,n);case 1:return this.Ca(t,n);default:throw new TypeError("Unknown search mode")}if(!n||null===e||0===i)return e;switch(i){case-1:return this.Ea(e);case 1:return this.Aa(e);default:throw new TypeError("Unknown search mode")}},t.prototype.Aa=function(t){for(var i=y(this.aa);t<this.sa&&i(this.Ma(t).Z);)t+=1;return t===this.sa?null:t},t.prototype.Ea=function(t){for(var i=y(this.aa);t>=this.na&&i(this.Ma(t).Z);)t-=1;return t<this.na?null:t},t.prototype.Ta=function(t,i){var n=this.wa(t);n>this.na&&(n-=1);var e=n!==this.sa&&this.ca(n)<t?n:null;return i&&null!==e?this.Ea(e):e},t.prototype.Ca=function(t,i){var n=this.ma(t),e=n!==this.sa&&t<this.ca(n)?n:null;return i&&null!==e?this.Aa(e):e},t.prototype.Da=function(t){var i=this.wa(t);return i===this.sa||t<this.er[i].Bi?null:i},t.prototype.wa=function(t){return ii(this.er,t,function(t,i){return t.Bi<i},this.na,this.sa)},t.prototype.ma=function(t){return ni(this.er,t,function(t,i){return i.Bi>t},this.na,this.sa)},t.prototype.La=function(t,i,n){var e=null,s=this.oa.get(n.Ba);if(void 0===s)throw new Error('Plot "'+n.Ba+'" is not registered');for(var r=t;r<i;r++){var h=s(this.er[r].Z);null==h||Number.isNaN(h)||(null===e?e={Va:h,za:h}:(h<e.Va&&(e.Va=h),h>e.za&&(e.za=h)))}return e},t.prototype.Fa=function(t){var i=Math.floor(t.Bi/30);this.ra.forEach(function(t){return t.delete(i)})},t.prototype.ya=function(t){return v(!this.ha,"collection should not be readonly"),v(0!==t.length,"plotRows should not be empty"),this.ea.clear(),this.ua.clear(),this.ra.clear(),this.er=t.concat(this.er),this.na=0,this.sa=this.er.length,t[0]},t.prototype.ka=function(t){return v(!this.ha,"collection should not be readonly"),v(0!==t.length,"plotRows should not be empty"),this.ea.clear(),this.ua.clear(),this.ra.clear(),this.er=this.er.concat(t),this.na=0,this.sa=this.er.length,t[0]},t.prototype.Na=function(t){v(!this.Gt(),"plot list should not be empty"),v(this.er[this.sa-1].Bi===t.Bi,"last row index should match new row index"),this.Fa(t),this.ea.delete(t.Bi),this.ua.delete(t.Bi),this.er[this.sa-1]=t},t.prototype.xa=function(t){return v(0!==t.length,"plot rows should not be empty"),this.ea.clear(),this.ua.clear(),this.ra.clear(),this.er=function(t,i){for(var n=function(t,i){for(var n=t.length,e=i.length,s=n+e,r=0,h=0;r<n&&h<e;)t[r].Bi<i[h].Bi?r++:t[r].Bi>i[h].Bi?h++:(r++,h++,s--);return s}(t,i),e=new Array(n),s=0,r=0,h=t.length,o=i.length,u=0;s<h&&r<o;)t[s].Bi<i[r].Bi?(e[u]=t[s],s++):t[s].Bi>i[r].Bi?(e[u]=i[r],r++):(e[u]=i[r],s++,r++),u++;for(;s<h;)e[u]=t[s],s++,u++;for(;r<o;)e[u]=i[r],r++,u++;return e}(this.er,t),this.na=0,this.sa=this.er.length,t[0]},t.prototype.ga=function(t,i,n){if(this.Gt())return null;var e=null,s=y(this.ar()),r=y(this.Yi()),h=t-n.Pa,o=i-n.Pa;h=Math.max(h,s),o=Math.min(o,r);var u=30*Math.ceil(h/30),l=Math.max(u,30*Math.floor(o/30)),a=this.wa(h),c=this.ma(Math.min(o,u,i));e=Ki(e,this.La(a,c,n));var f=this.ra.get(n.Ba);void 0===f&&(f=new Map,this.ra.set(n.Ba,f));for(var p=Math.max(u+1,h);p<l;p+=30){var v=Math.floor(p/30),d=f.get(v);if(void 0===d){var w=this.wa(30*v),g=this.ma(30*(v+1)-1);d=this.La(w,g,n),f.set(v,d)}e=Ki(e,d)}return a=this.wa(l),c=this.ma(o),Ki(e,this.La(a,c,n))},t}();function Ki(t,i){return null===t?i:null===i?t:{Va:Math.min(t.Va,i.Va),za:Math.max(t.za,i.za)}}var qi={open:function(t){return t[0]},high:function(t){return t[1]},low:function(t){return t[2]},close:function(t){return t[3]},hl2:function(t){return(t[1]+t[2])/2},hlc3:function(t){return(t[1]+t[2]+t[3])/3},ohlc4:function(t){return(t[0]+t[1]+t[2]+t[3])/4}},Xi=["open","high","low","close","hl2","hlc3","ohlc4"];function ji(t){return qi[t]}var $i=function(t){function i(i,n,e){var s=t.call(this,i)||this;s.G=function(){return new Hi((t=new Map,Xi.forEach(function(i,n){t.set(i,ji(i))}),t));var t}(),s.Ro=new Ni(s),s.Oa=[],s.Ia=new Ci(s),s.Wa=!1,s.Ra=null,s.Ua=new Ui,s.ja=[],s.qa=[],s.Si=n,s.Ha=e;var r=new Pi(s,{ct:i});return s.pi=[r],s.Ya=new Mi(r,s,i),s.Ka(),s.$a(),s.Xa=s.Nu(),s.Za(),s}return c(i,t),i.prototype.fn=function(){},i.prototype.Ja=function(){return this.Wa},i.prototype.Ao=function(t){return this.Si.priceLineColor||t},i.prototype.Co=function(t,i,n){var e={Eo:!0},s=this.X();if(this.ct().U().Gt()||s.Gt()||this.G.Gt())return e;var r,h,o=this.ct().U().Ur(),u=this.q();if(null===o||null===u)return e;if(i){var l=this.G.fa();if(null===l)return e;r=l,h=l.Bi}else{var a=this.G._a(o.gh(),-1);if(null===a)return e;if(null===(r=this.G.cr(a.Bi)))return e;h=a.Bi}var c=void 0!==t?r.Z[t]:this.Xa(r.Z),f=this.K().Y(h,{Z:r}),p=s.$(c,u.Z);return{Eo:!1,P:n?c:void 0,Et:s.Qt(c,u.Z),Fo:s.fh(c),Po:s._h(c,u.Z),et:f.H,Vt:p,Bi:h}},i.prototype.K=function(){return null!==this.Ra||(this.Ra=new Yi(this)),this.Ra},i.prototype.O=function(){return this.Si},i.prototype.ms=function(t){var i=t.priceScaleId;void 0!==i&&i!==this.Si.priceScaleId&&this.ct().Ga(this,i),g(this.Si,t),null!==this.oi&&void 0!==t.scaleMargins&&this.oi.ms({scaleMargins:t.scaleMargins}),void 0!==t.priceFormat&&this.Ka(),this.ct().Qa(this)},i.prototype.tl=function(){this.G.ur(),this.Ua.ur(),this.Za()},i.prototype.il=function(t,i){void 0===i&&(i=!1),i&&this.G.ur(),this.G.gn(t),this.nl(),this.Li.B("data"),this.Di.B("data");var n=this.ct().ro(this);this.ct().sl(n),this.ct().Qa(this),this.ct().hl(),this.ct().ee()},i.prototype.rl=function(t){this.ja=t.map(function(t){return f({},t)}),this.nl();var i=this.ct().ro(this);this.Di.B("data"),this.ct().sl(i),this.ct().Qa(this),this.ct().hl(),this.ct().ee()},i.prototype.el=function(){return this.ja},i.prototype.Do=function(){return this.qa},i.prototype.ul=function(t){var i=new Ii(this,t);return this.Oa.push(i),this.ct().Qa(this),i},i.prototype.ol=function(t){var i=this.Oa.indexOf(t);-1!==i&&this.Oa.splice(i,1),this.ct().Qa(this)},i.prototype.Zu=function(){return this.Ua},i.prototype.$o=function(){return this.Ha},i.prototype.q=function(){var t=this.al();return null===t?null:{Z:this.Xa(t.Z),ih:t.F}},i.prototype.al=function(){var t=this.ct().U().Ur();if(null===t)return null;var i=t.ph();return this.G._a(i,1)},i.prototype.Ki=function(){return this.G},i.prototype.hr=function(t,i){var n=this.ll(t,i);return n?n.Bi:null},i.prototype.ll=function(t,i){return b(t)?this.G._a(t,i):null},i.prototype.To=function(t){var i=this.G.cr(t);return null===i?null:"Bar"===this.Ha||"Candlestick"===this.Ha?{open:i.Z[0],high:i.Z[1],low:i.Z[2],close:i.Z[3]}:this.Nu()(i.Z)},i.prototype._i=function(){var t=[];this.fl()||t.push(this.Ia);for(var i=0,n=this.Oa;i<n.length;i++){var e=n[i];t.push(e.Uo())}return t.push(this.Li),t.push(this.Ro),t.push(this.Ya),t.push(this.Di),t},i.prototype.vi=function(t,i){for(var n=i===this.oi||this.fl()?p(this.pi):[],e=0,s=this.Oa;e<s.length;e++){var r=s[e];n.push(r.jo())}return n},i.prototype.mh=function(t,i){var n=this;if(void 0!==this.Si.autoscaleInfoProvider){var e=this.Si.autoscaleInfoProvider(function(){var e=n.cl(t,i);return null===e?null:e.Dn()});return Fi.Tn(e)}return this.cl(t,i)},i.prototype.Mh=function(){return this.Si.priceFormat.minMove},i.prototype.ah=function(){return this.ls},i.prototype.Nu=function(){return this.Xa},i.prototype.ji=function(){this.Li.B(),this.Di.B();for(var t=0,i=this.pi;t<i.length;t++)i[t].B();for(var n=0,e=this.Oa;n<e.length;n++)e[n].B();this.Ro.B(),this.Ia.B()},i.prototype.ci=function(t){this.oi!==t&&(this.oi=t)},i.prototype.X=function(){return y(this.oi)},i.prototype.j=function(t){if("Line"!==this.Ha&&"Area"!==this.Ha||!this.Si.crosshairMarkerVisible)return null;var i=this.G.cr(t);return null===i?null:{P:this.Xa(i.Z),k:this.vl()}},i.prototype.Bo=function(){return this.Si.title},i.prototype.fl=function(){return!Ht(this.X().bs())},i.prototype.cl=function(t,i){if(!b(t)||!b(i)||this.G.Gt())return null;var n,e="Line"===this.Ha||"Area"===this.Ha||"Histogram"===this.Ha?"close":null,s=null!==(n=null!==e?this.G.pa(t,i,[{Ba:e,Pa:0}]):this.G.pa(t,i,[{Ba:"low",Pa:0},{Ba:"high",Pa:0}]))?new ht(n.Va,n.za):null;if("Histogram"===this.$o()){var r=this.Si.base,h=new ht(r,r);s=null!==s?s.gn(h):h}return new Fi(s,this.Di.So())},i.prototype.vl=function(){switch(this.Ha){case"Line":case"Area":return this.Si.crosshairMarkerRadius}return 0},i.prototype.Ka=function(){switch(this.Si.priceFormat.type){case"custom":this.ls={Gi:this.Si.priceFormat.formatter};break;case"volume":this.ls=new $t(this.Si.priceFormat.precision);break;case"percent":this.ls=new st(this.Si.priceFormat.precision);break;default:var t=Math.pow(10,this.Si.priceFormat.precision);this.ls=new et(t,this.Si.priceFormat.minMove*t,!1,void 0)}null!==this.oi&&this.oi.ps()},i.prototype.$a=function(){this.Xa=ji("close")},i.prototype.nl=function(){var t=this,i=this.ct().U().Kr();if(0!==i.or()&&0!==this.G.or()){var n=y(this.G.ar());this.qa=this.ja.map(function(e,s){var r=y(i._r(e.time.Rh,!0)),h=r<n?1:-1;return{time:y(t.G._a(r,h)).Bi,position:e.position,shape:e.shape,color:e.color,id:e.id,do:s,text:e.text,size:e.size}})}else this.qa=[]},i.prototype.Za=function(){switch(this.Di=new ki(this,this.ct()),this.Ha){case"Bar":this.Li=new ci(this,this.ct());break;case"Candlestick":this.Li=new pi(this,this.ct());break;case"Line":this.Li=new wi(this,this.ct());break;case"Area":this.Li=new ui(this,this.ct());break;case"Histogram":this.Li=new yi(this,this.ct());break;default:throw Error("Unknown chart style assigned: "+this.Ha)}},i}(Wi),Ji=function(){function t(t){this.Si=t}return t.prototype._l=function(t,i,n){var e=t;if(0===this.Si.mode)return e;var s=n.Ci(),r=s.q();if(null===r)return e;var h=s.$(t,r),o=n.Zs().filter(function(t){return t instanceof $i}).reduce(function(t,e){if(n.eo(e))return t;var s=e.X(),r=e.Ki();if(s.Gt()||!r.Kh(i))return t;var h=r.cr(i);if(null===h)return t;var o=[h.Z[3]],u=w(e.q());return t.concat(o.map(function(t){return s.$(t,u.Z)}))},[]);if(0===o.length)return e;o.sort(function(t,i){return Math.abs(t-h)-Math.abs(i-h)});var u=o[0];return s.Ei(u,r)},t}(),Qi=function(){function t(t,i){this.rs=[],this.dl=new Map,this.Hn=0,this.pr=0,this.wl=1e3,this.es=null,this.Ml=new rt,this.bl=t,this.ni=i;var n=i.O();this.ml=this.pl("left",n.leftPriceScale),this.gl=this.pl("right",n.rightPriceScale),this.ml.Ls().sn(this.yl.bind(this,this.ml),this),this.gl.Ls().sn(this.yl.bind(this,this.ml),this),this.kl(n)}return t.prototype.kl=function(t){if(t.leftPriceScale&&this.ml.ms(t.leftPriceScale),t.rightPriceScale&&this.gl.ms(t.rightPriceScale),t.localization&&(this.ml.ps(),this.gl.ps()),t.overlayPriceScales)for(var i=0,n=Array.from(this.dl.values());i<n.length;i++){var e=y(n[i][0].X());e.ms(t.overlayPriceScales),t.localization&&e.ps()}},t.prototype.Nl=function(t){switch(t){case"left":return this.ml;case"right":return this.gl}return this.dl.has(t)?d(this.dl.get(t))[0].X():null},t.prototype.fn=function(){this.ct().xl().on(this),this.ml.Ls().on(this),this.gl.Ls().on(this),this.rs.forEach(function(t){t.fn&&t.fn()}),this.Ml.an()},t.prototype.Sl=function(){return this.wl},t.prototype.Dl=function(t){this.wl=t},t.prototype.ct=function(){return this.ni},t.prototype.dt=function(){return this.pr},t.prototype.wt=function(){return this.Hn},t.prototype.Zr=function(t){this.pr=t,this.ji()},t.prototype.Bs=function(t){var i=this;this.Hn=t,this.ml.Bs(t),this.gl.Bs(t),this.rs.forEach(function(n){if(i.eo(n)){var e=n.X();null!==e&&e.Bs(t)}}),this.ji()},t.prototype.Zs=function(){return this.rs},t.prototype.eo=function(t){var i=t.X();return null===i||this.ml!==i&&this.gl!==i},t.prototype.Gs=function(t,i,n){var e=void 0!==n?n:this.Cl().Tl-1;this.El(t,i,e)},t.prototype.th=function(t){var i=this.rs.indexOf(t);v(-1!==i,"removeDataSource: invalid data source"),this.rs.splice(i,1);var n=y(t.X()).bs();if(this.dl.has(n)){var e=d(this.dl.get(n)),s=e.indexOf(t);-1!==s&&(e.splice(s,1),0===e.length&&this.dl.delete(n))}var r=t.X();r&&r.Zs().indexOf(t)>=0&&r.th(t),null!==r&&(r.Qs(),this.Al(r)),this.es=null},t.prototype.uo=function(t){return t===this.ml?"left":t===this.gl?"right":"overlay"},t.prototype.Ll=function(){return this.ml},t.prototype.Bl=function(){return this.gl},t.prototype.Vl=function(t,i){t.sh(i)},t.prototype.zl=function(t,i){t.hh(i),this.ji()},t.prototype.Fl=function(t){t.rh()},t.prototype.Pl=function(t,i){t.eh(i)},t.prototype.Ol=function(t,i){t.uh(i),this.ji()},t.prototype.Il=function(t){t.oh()},t.prototype.Wl=function(t,i){t.gs({Ts:i}),this.bl.Gt()?t.Es(null):this.Al(t)},t.prototype.ji=function(){this.rs.forEach(function(t){t.ji()})},t.prototype.Ci=function(){var t=null;return this.ni.O().rightPriceScale.visible&&0!==this.gl.Zs().length?t=this.gl:this.ni.O().leftPriceScale.visible&&0!==this.ml.Zs().length?t=this.ml:0!==this.rs.length&&(t=this.rs[0].X()),null===t&&(t=this.gl),t},t.prototype.Al=function(t){null!==t&&t.xs()&&this.Rl(t)},t.prototype.Ul=function(t){var i=this.bl.Ur();t.gs({Ts:!0}),null!==i&&t.wh(i),this.ji()},t.prototype.jl=function(){this.Rl(this.ml),this.Rl(this.gl)},t.prototype.ql=function(){var t=this;this.Al(this.ml),this.Al(this.gl),this.rs.forEach(function(i){t.eo(i)&&t.Al(i.X())}),this.ji(),this.ni.ee()},t.prototype.Gt=function(){return 0===this.rs.length},t.prototype.Js=function(){return null===this.es&&(this.es=_t(this.rs)),this.es},t.prototype.Hl=function(){return this.Ml},t.prototype.Rl=function(t){var i=t.dh();if(i&&i.length>0&&!this.bl.Gt()){var n=this.bl.Ur();null!==n&&t.wh(n)}t.ji()},t.prototype.Cl=function(){var t=this.Js();if(0===t.length)return{Tl:0,Yl:0};for(var i=0,n=0,e=0;e<t.length;e++){var s=t[e].li();null!==s&&(s<i&&(i=s),s>n&&(n=s))}return{Tl:i,Yl:n}},t.prototype.El=function(t,i,n){var e=this.Nl(i);if(null===e&&(e=this.pl(i,this.ni.O().overlayPriceScales)),this.rs.push(t),!Ht(i)){var s=this.dl.get(i)||[];s.push(t),this.dl.set(i,s)}e.Gs(t),t.ci(e),t.fi(n),this.Al(e),this.es=null},t.prototype.yl=function(t,i,n){i.ys!==n.ys&&this.Rl(t)},t.prototype.pl=function(t,i){var n=f({tt:!0,Ts:!0},C(i)),e=new Gt(t,n,this.ni.O().layout,this.ni.O().localization);return e.Bs(this.wt()),e},t}(),tn=function(t){function i(i){var n=t.call(this)||this;return n.Kl=new Map,n.G=i,n}return c(i,t),i.prototype.h=function(t){},i.prototype.o=function(t){if(this.G.tt){t.save();for(var i=0,n=0,e=this.G.$l;n<e.length;n++)if(0!==(u=e[n]).Et.length){t.font=u.gt;var s=this.Xl(t,u.Et);s>this.G.dt?u.de=this.G.dt/s:u.de=1,i+=u.Zl*u.de}var r=0;switch(this.G.Jl){case"top":r=0;break;case"center":r=Math.max((this.G.wt-i)/2,0);break;case"bottom":r=Math.max(this.G.wt-i,0)}t.fillStyle=this.G.et;for(var h=0,o=this.G.$l;h<o.length;h++){var u=o[h];t.save();var l=0;switch(this.G.Gl){case"left":t.textAlign="left",l=u.Zl/2;break;case"center":t.textAlign="center",l=this.G.dt/2;break;case"right":t.textAlign="right",l=this.G.dt-1-u.Zl/2}t.translate(l,r),t.textBaseline="top",t.font=u.gt,t.scale(u.de,u.de),t.fillText(u.Et,0,u.Ql),t.restore(),r+=u.Zl*u.de}t.restore()}},i.prototype.Xl=function(t,i){var n=this.tf(t.font),e=n.get(i);return void 0===e&&(e=t.measureText(i).width,n.set(i,e)),e},i.prototype.tf=function(t){var i=this.Kl.get(t);return void 0===i&&(i=new Map,this.Kl.set(t,i)),i},i}(D),nn=function(){function t(t){this.C=!0,this.ot={tt:!1,et:"",wt:0,dt:0,$l:[],Jl:"center",Gl:"center"},this.at=new tn(this.ot),this.lt=t}return t.prototype.B=function(){this.C=!0},t.prototype.I=function(t,i){return this.C&&(this.W(t,i),this.C=!1),this.at},t.prototype.W=function(t,i){var n=this.lt.O(),e=this.ot;e.tt=n.visible,e.tt&&(e.et=n.color,e.dt=i,e.wt=t,e.Gl=n.horzAlign,e.Jl=n.vertAlign,e.$l=[{Et:n.text,gt:At(n.fontSize),Zl:1.2*n.fontSize,Ql:0,de:0}])},t}(),en=function(t){function i(i,n){var e=t.call(this)||this;return e.Si=n,e.Li=new nn(e),e}return c(i,t),i.prototype._i=function(){return[this.Li]},i.prototype.O=function(){return this.Si},i.prototype.ji=function(){this.Li.B()},i}(tt),sn=function(){function t(t,i){this.if=[],this.nf=[],this.pr=0,this.sf=null,this.hf=null,this.rf=new rt,this.ef=new rt,this.uf=t,this.Si=i,this.af=new Yt(this),this.bl=new It(this,i.timeScale,this.Si.localization),this.lf=new Xt,this.L=new it(this,i.crosshair),this.ff=new Ji(i.crosshair),this.cf=new en(this,i.watermark),this.vf(),this.if[0].Dl(2e3)}return t.prototype._f=function(){this.df(new jt(3))},t.prototype.ee=function(){this.df(new jt(2))},t.prototype.Qa=function(t){var i=this.wf(t);this.df(i)},t.prototype.Mf=function(){return this.hf},t.prototype.bf=function(t){var i=this.hf;this.hf=t,null!==i&&this.Qa(i.mf),null!==t&&this.Qa(t.mf)},t.prototype.O=function(){return this.Si},t.prototype.ms=function(t){g(this.Si,t),this.if.forEach(function(i){return i.kl(t)}),void 0!==t.timeScale&&this.bl.ms(t.timeScale),void 0!==t.localization&&this.bl.Pr(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.rf.an(),this._f()},t.prototype.pf=function(t,i){var n=this.gf(t);null!==n&&(n.X.ms(i),this.rf.an())},t.prototype.gf=function(t){for(var i=0,n=this.if;i<n.length;i++){var e=n[i],s=e.Nl(t);if(null!==s)return{ft:e,X:s}}return null},t.prototype.yf=function(){this.if.forEach(function(t){return t.ji()}),this.hl()},t.prototype.U=function(){return this.bl},t.prototype.kf=function(){return this.if},t.prototype.Nf=function(){return this.lf},t.prototype.xf=function(){return this.cf},t.prototype.Sf=function(){return this.L},t.prototype.Df=function(){return this.ef},t.prototype.dt=function(){return this.pr},t.prototype.Tf=function(t,i){t.Bs(i),this.he(),this.ee()},t.prototype.Zr=function(t){this.pr=t,this.bl.Zr(this.pr),this.if.forEach(function(i){return i.Zr(t)}),this.he()},t.prototype.vf=function(t){var i=new Qi(this.bl,this);void 0!==t?this.if.splice(t,0,i):this.if.push(i);var n=void 0===t?this.if.length-1:t,e=new jt(3);return e.Je(n,{Ge:0,Ts:!0}),this.Ye(e),i},t.prototype.Vl=function(t,i,n){t.Vl(i,n)},t.prototype.zl=function(t,i,n){t.zl(i,n),this.hl(),this.df(this.Cf(t,2))},t.prototype.Fl=function(t,i){t.Fl(i),this.df(this.Cf(t,2))},t.prototype.Pl=function(t,i,n){i.xs()||t.Pl(i,n)},t.prototype.Ol=function(t,i,n){i.xs()||(t.Ol(i,n),this.hl(),this.df(this.Cf(t,2)))},t.prototype.Il=function(t,i){i.xs()||(t.Il(i),this.df(this.Cf(t,2)))},t.prototype.Wl=function(t,i,n){t.Wl(i,n),this.df(this.Cf(t,2))},t.prototype.Ul=function(t,i){t.Ul(i),this.df(this.Cf(t,2))},t.prototype.Ef=function(t){this.bl.sh(t)},t.prototype.Af=function(t,i){var n=this.U();if(!n.Gt()&&0!==i){var e=n.dt();t=Math.max(1,Math.min(t,e)),n.de(t,i),this.hl(),this.he(),this.ee()}},t.prototype.Lf=function(t){this.Bf(0),this.Vf(t),this.zf()},t.prototype.Ff=function(t){this.bl.hh(t),this.he(),this.hl(),this.ee()},t.prototype.Pf=function(){this.bl.rh(),this.ee()},t.prototype.Bf=function(t){this.sf=t,this.bl.eh(t)},t.prototype.Vf=function(t){var i=!1;return null!==this.sf&&Math.abs(t-this.sf)>20&&(this.sf=null,i=!0),this.bl.uh(t),this.he(),this.hl(),this.ee(),i},t.prototype.zf=function(){this.bl.oh(),this.ee(),this.sf=null},t.prototype.Of=function(){this.bl.ce(),this.he(),this.hl(),this.ee()},t.prototype.Ye=function(t){this.uf&&this.uf(t),this.lf.Ye(),this.ee()},t.prototype.V=function(){return this.nf},t.prototype.If=function(t,i,n){this.L.Vi(t,i);var e=NaN,s=this.bl.ne(t),r=this.bl.Ur();null!==r&&(s=Math.min(Math.max(r.ph(),s),r.gh()));var h=n.Ci(),o=h.q();null!==o&&(e=h.Ei(i,o)),e=this.ff._l(e,s,n),this.L.Oi(s,e,n),this.Wf(),this.ef.an(this.L.R(),{x:t,y:i})},t.prototype.Rf=function(){this.Sf().Wi(),this.Wf(),this.ef.an(null,null)},t.prototype.hl=function(){var t=this.L.ft();if(null!==t){var i=this.L.Fi(),n=this.L.Pi();this.If(i,n,t)}},t.prototype.Uf=function(t,i,n,e){e&&this.bl.tr(),this.bl.B(t,i,n)},t.prototype.jf=function(t){var i=this.nf.reduce(function(t,i){var n=i.Ki();if(n.Gt())return t;var e=y(n.Yi());return void 0===t?e:Math.max(e,t)},void 0);if(void 0!==i){var n=this.bl,e=n.te(),s=n.Ur();if(null!==s){var r=s.Kh(e);if(void 0!==t&&t>0&&!r){var h=i-e;n.Rr(n.oe()-h)}}n._e(i)}this.hl(),this.he(),this.ee()},t.prototype.sl=function(t){null!==t&&t.ql()},t.prototype.ro=function(t){var i=this.if.find(function(i){return i.Js().includes(t)});return void 0===i?null:i},t.prototype.he=function(){this.if.forEach(function(t){return t.ql()}),this.yf()},t.prototype.fn=function(){this.if.forEach(function(t){return t.fn()}),this.if.length=0,this.Si.localization.priceFormatter=void 0,this.Si.localization.timeFormatter=void 0},t.prototype.qf=function(){return this.af},t.prototype.oo=function(){return this.af.O()},t.prototype.xl=function(){return this.rf},t.prototype.Hf=function(t,i){var n=this.if[0],e=this.Yf(i,t,n);return this.nf.push(e),1===this.nf.length?this._f():this.ee(),e},t.prototype.Kf=function(t){var i=this.ro(t),n=this.nf.indexOf(t);v(-1!==n,"Series not found"),this.nf.splice(n,1),y(i).th(t),t.fn&&t.fn()},t.prototype.Ga=function(t,i){var n=y(this.ro(t));n.th(t);var e=this.gf(i);if(null===e){var s=t.li();n.Gs(t,i,s)}else s=e.ft===n?t.li():void 0,e.ft.Gs(t,i,s)},t.prototype.ke=function(){var t=new jt(2);t.nu(),this.df(t)},t.prototype.$f=function(t){var i=new jt(2);i.Ne(t),this.df(i)},t.prototype.Xf=function(){return this.Si.rightPriceScale.visible?"right":"left"},t.prototype.Cf=function(t,i){var n=new jt(i);if(null!==t){var e=this.if.indexOf(t);n.Je(e,{Ge:i})}return n},t.prototype.wf=function(t,i){return void 0===i&&(i=2),this.Cf(this.ro(t),i)},t.prototype.df=function(t){this.uf&&this.uf(t),this.lf.Ye()},t.prototype.Wf=function(){this.df(new jt(1))},t.prototype.Yf=function(t,i,n){var e=new $i(this,t,i),s=void 0!==t.priceScaleId?t.priceScaleId:this.Xf();return n.Gs(e,s),Ht(s)||e.ms(t),e},t}(),rn=function(){function t(t,i){this.st=t,this.ht=i}return t.prototype._n=function(t){return this.st===t.st&&this.ht===t.ht},t}();function hn(t){return t.ownerDocument&&t.ownerDocument.defaultView&&t.ownerDocument.defaultView.devicePixelRatio||1}function on(t){var i=y(t.getContext("2d"));return i.setTransform(1,0,0,1,0,0),i}function un(t){var i=t.createElement("canvas");return function(t){t.style.userSelect="none",t.style.webkitUserSelect="none",t.style.msUserSelect="none",t.style.MozUserSelect="none",t.style.webkitTapHighlightColor="transparent"}(i),i}function ln(t,i){var n=un(t),e=hn(n);return n.style.width=i.st+"px",n.style.height=i.ht+"px",n.width=i.st*e,n.height=i.ht*e,n}function an(t,i){var n=un(y(t.ownerDocument));t.appendChild(n);var s,r=(void 0===s&&(s=e),new o(n,s));return r.resizeCanvas({width:i.st,height:i.ht}),r}var cn=!!navigator.maxTouchPoints||!!navigator.msMaxTouchPoints||"ontouchstart"in window||Boolean(window.DocumentTouch&&document instanceof window.DocumentTouch),fn="onorientationchange"in window&&cn,pn=/Android/i.test(navigator.userAgent),vn=/iPhone|iPad|iPod|AppleWebKit.+Mobile/i.test(navigator.userAgent),dn=pn||vn,yn=function(){function t(t,i,n){this.Zf=0,this.Jf=null,this.Gf=null,this.Qf=!1,this.tc=null,this.ic=!1,this.nc=!1,this.sc=null,this.hc=null,this.rc=null,this.ec=null,this.uc=0,this.oc=!1,this.ac=!1,this.lc=!1,this.fc=t,this.cc=i,this.Si=n,this.vc()}return t.prototype.fn=function(){null!==this.sc&&(this.sc(),this.sc=null),null!==this.hc&&(this.hc(),this.hc=null),null!==this.rc&&(this.rc(),this.rc=null),this._c(),this.dc()},t.prototype.wc=function(t){var i=this;this.hc&&this.hc();var n=this.Mc.bind(this);this.hc=function(){i.fc.removeEventListener("mousemove",n)},this.fc.addEventListener("mousemove",n),mn(t)&&this.Mc(t);var e=this.bc(t);this.mc(e,this.cc.pc)},t.prototype.dc=function(){null!==this.Jf&&clearTimeout(this.Jf),this.Zf=0,this.Jf=null},t.prototype.Mc=function(t){if(!this.lc||mn(t)){var i=this.bc(t);this.mc(i,this.cc.gc)}},t.prototype.yc=function(t){if(!("button"in t&&0!==t.button||null!==this.ec)){var i=mn(t);if(!this.ac||!i){this.oc=!0;var n=this.bc(t),e=w(this.tc),s=Math.abs(e.m-n.kc),r=Math.abs(e.p-n.Nc),h=s+r>5;if(h||!i){if(h&&!this.ic&&i){var o=.5*s,u=r>=o&&!this.Si.xc,l=o>r&&!this.Si.Sc;u||l||(this.ac=!0)}h&&(this.ic=!0,this.nc=!0,i&&this._c()),this.ac||(this.mc(n,this.cc.Dc),i&&bn(t))}}}},t.prototype.Tc=function(t){if(!("button"in t)||0===t.button){var i=this.bc(t);this._c(),this.tc=null,this.lc=!1,this.rc&&(this.rc(),this.rc=null),mn(t)&&this.Cc(t),this.mc(i,this.cc.Ec),++this.Zf,this.Jf&&this.Zf>1?(this.mc(i,this.cc.Ac),this.dc()):this.nc||this.mc(i,this.cc.Lc),mn(t)&&(bn(t),this.Cc(t),0===t.touches.length&&(this.Qf=!1))}},t.prototype._c=function(){null!==this.Gf&&(clearTimeout(this.Gf),this.Gf=null)},t.prototype.Bc=function(t){if(!("button"in t)||0===t.button){var i=this.bc(t);this.nc=!1,this.ic=!1,this.ac=!1,mn(t)&&this.wc(t),this.tc={m:i.kc,p:i.Nc},this.rc&&(this.rc(),this.rc=null);var n=this.yc.bind(this),e=this.Tc.bind(this),s=this.fc.ownerDocument.documentElement;this.rc=function(){s.removeEventListener("touchmove",n),s.removeEventListener("touchend",e),s.removeEventListener("mousemove",n),s.removeEventListener("mouseup",e)},s.addEventListener("touchmove",n,{passive:!1}),s.addEventListener("touchend",e,{passive:!1}),this._c(),mn(t)&&1===t.touches.length?this.Gf=setTimeout(this.Vc.bind(this,t),240):(s.addEventListener("mousemove",n),s.addEventListener("mouseup",e)),this.lc=!0,this.mc(i,this.cc.zc),this.Jf||(this.Zf=0,this.Jf=setTimeout(this.dc.bind(this),500))}},t.prototype.vc=function(){var t=this;this.fc.addEventListener("mouseenter",this.wc.bind(this)),this.fc.addEventListener("touchcancel",this._c.bind(this));var i=this.fc.ownerDocument,n=function(i){t.cc.Fc&&(i.target&&t.fc.contains(i.target)||t.cc.Fc())};this.sc=function(){i.removeEventListener("mousedown",n),i.removeEventListener("touchstart",n)},i.addEventListener("mousedown",n),i.addEventListener("touchstart",n,{passive:!0}),this.fc.addEventListener("mouseleave",this.Cc.bind(this)),this.fc.addEventListener("touchstart",this.Bc.bind(this),{passive:!0}),fn||this.fc.addEventListener("mousedown",this.Bc.bind(this)),this.Pc(),this.fc.addEventListener("touchmove",function(){},{passive:!1})},t.prototype.Pc=function(){var t=this;void 0===this.cc.Oc&&void 0===this.cc.Ic&&void 0===this.cc.Wc||(this.fc.addEventListener("touchstart",function(i){return t.Rc(i.touches)},{passive:!0}),this.fc.addEventListener("touchmove",function(i){if(2===i.touches.length&&null!==t.ec&&void 0!==t.cc.Ic){var n=gn(i.touches[0],i.touches[1])/t.uc;t.cc.Ic(t.ec,n),bn(i)}},{passive:!1}),this.fc.addEventListener("touchend",function(i){t.Rc(i.touches)}))},t.prototype.Rc=function(t){1===t.length&&(this.oc=!1),2!==t.length||this.oc||this.Qf?this.Uc():this.jc(t)},t.prototype.jc=function(t){var i=wn(this.fc);this.ec={m:(t[0].clientX-i.left+(t[1].clientX-i.left))/2,p:(t[0].clientY-i.top+(t[1].clientY-i.top))/2},this.uc=gn(t[0],t[1]),void 0!==this.cc.Oc&&this.cc.Oc(),this._c()},t.prototype.Uc=function(){null!==this.ec&&(this.ec=null,void 0!==this.cc.Wc&&this.cc.Wc())},t.prototype.Cc=function(t){this.hc&&this.hc();var i=this.bc(t);this.mc(i,this.cc.qc)},t.prototype.Vc=function(t){var i=this.bc(t);this.mc(i,this.cc.Hc),this.nc=!0,this.Qf=!0},t.prototype.mc=function(t,i){i&&i.call(this.cc,t)},t.prototype.bc=function(t){var i;i="touches"in t&&t.touches.length?t.touches[0]:"changedTouches"in t&&t.changedTouches.length?t.changedTouches[0]:t;var n=wn(this.fc);return{Yc:i.clientX,Kc:i.clientY,kc:i.pageX,Nc:i.pageY,$c:i.screenX,Xc:i.screenY,Zc:i.clientX-n.left,Jc:i.clientY-n.top,Gc:t.ctrlKey,Qc:t.altKey,tv:t.shiftKey,iv:t.metaKey,nv:t.type.startsWith("mouse")?"mouse":"touch",sv:i.target,hv:t.view}},t}();function wn(t){return t.getBoundingClientRect()||{left:0,top:0}}function gn(t,i){var n=t.clientX-i.clientX,e=t.clientY-i.clientY;return Math.sqrt(n*n+e*e)}function mn(t){return Boolean(t.touches)}function bn(t){t.cancelable&&t.preventDefault()}var Mn=function(){function t(t,i,n,e){if(this.rv=0,this.ev=0,this.uv=0,this.ov=0,this.av=0,this.lv=0,this.fv=0,this.cv=t,this.vv=t._v()[i],this.dv=t._v()[n],this.wv=document.createElement("tr"),this.wv.style.height="1px",this.Mv=document.createElement("td"),this.Mv.style.padding="0",this.Mv.setAttribute("colspan","3"),this.bv(),this.wv.appendChild(this.Mv),e)this.mv=null,this.pv=null;else{this.mv=document.createElement("div"),this.mv.style.position="absolute",this.mv.style.zIndex="50",this.mv.style.height="5px",this.mv.style.width="100%",this.mv.style.backgroundColor="rgba(255, 255, 255, 0.02)",this.mv.style.cursor="ns-resize",this.Mv.appendChild(this.mv);var s={zc:this.gv.bind(this),Dc:this.yv.bind(this),Ec:this.kv.bind(this)};this.pv=new yn(this.mv,s,{xc:!1,Sc:!0})}}return t.prototype.fn=function(){null!==this.pv&&this.pv.fn()},t.prototype.Nv=function(){return this.wv},t.prototype.xv=function(){return new rn(this.vv.xv().st,1)},t.prototype.Sv=function(){var t=this.xv(),i=ln(document,t),n=on(i);return n.fillStyle=this.cv.O().timeScale.borderColor,n.fillRect(0,0,t.st,t.ht),i},t.prototype.B=function(){this.bv()},t.prototype.bv=function(){this.Mv.style.background=this.cv.O().timeScale.borderColor},t.prototype.gv=function(t){this.rv=t.Nc,this.ev=0,this.uv=this.vv.xv().ht+this.dv.xv().ht,this.ov=this.vv.Sl()+this.dv.Sl(),this.av=30,this.lv=this.uv-this.av,this.fv=this.ov/this.uv},t.prototype.yv=function(t){this.ev=t.Nc-this.rv;var i=this.vv.xv().ht,n=ot(i+this.ev,this.av,this.lv)*this.fv,e=this.ov-n;this.vv.Dl(n),this.dv.Dl(e),this.cv.ct()._f(),this.vv.xv().ht!==i&&(this.rv=t.Nc)},t.prototype.kv=function(t){this.rv=0,this.ev=0,this.uv=0,this.ov=0,this.av=0,this.lv=0,this.fv=0},t}(),_n=function(){function t(t,i,n,e){this.io=new mi(200),this.Ve=0,this.Dv="",this.co="",this.Tv=[],this.Cv=new Map,this.Ve=t,this.Dv=i,this.co=At(t,n,e)}return t.prototype.fn=function(){delete this.io,this.Tv=[],this.Cv.clear()},t.prototype.Ev=function(t,i,n,e,s){var r=this.Av(t,i);if("left"!==s){var h=hn(t.canvas);n-=Math.floor(r.Lv*h)}e-=Math.floor(r.wt/2),t.drawImage(r.Bv,n,e,r.dt,r.wt)},t.prototype.Av=function(t,i){var n,e=this;if(this.Cv.has(i))n=d(this.Cv.get(i));else{if(this.Tv.length>=200){var s=d(this.Tv.shift());this.Cv.delete(s)}var r=hn(t.canvas),h=Math.ceil(this.Ve/4.5),o=Math.round(this.Ve/10),u=Math.ceil(this.io.At(t,i)),l=at(Math.round(u+2*h)),a=at(this.Ve+2*h),c=ln(document,new rn(l,a));n={Et:i,Lv:Math.round(Math.max(1,u)),dt:Math.ceil(l*r),wt:Math.ceil(a*r),Bv:c},0!==u&&(this.Tv.push(n.Et),this.Cv.set(n.Et,n)),Y(t=on(n.Bv),r,function(){t.font=e.co,t.fillStyle=e.Dv,t.fillText(i,0,a-h-o)})}return n},t}(),Sn=function(){function t(t,i,n,e){var s=this;this.Zt=null,this.Vv=null,this.zv=null,this.Fv=!1,this.Pv=!0,this.Ov=new mi(50),this.Iv=new _n(11,"#000"),this.Dv=null,this.co=null,this.Wv=0,this.Rv=function(){s.Uv(s.af.O()),s.wi.jv().ct().ee()},this.qv=function(){s.wi.jv().ct().ee()},this.wi=t,this.Si=i,this.af=n,this.Hv="left"===e,this.Mv=document.createElement("div"),this.Mv.style.height="100%",this.Mv.style.overflow="hidden",this.Mv.style.width="25px",this.Mv.style.left="0",this.Mv.style.position="relative",this.Yv=an(this.Mv,new rn(16,16)),this.Yv.subscribeCanvasConfigured(this.Rv);var r=this.Yv.canvas;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Kv=an(this.Mv,new rn(16,16)),this.Kv.subscribeCanvasConfigured(this.qv);var h=this.Kv.canvas;h.style.position="absolute",h.style.zIndex="2",h.style.left="0",h.style.top="0";var o={zc:this.gv.bind(this),Dc:this.yv.bind(this),Fc:this.$v.bind(this),Ec:this.kv.bind(this),Ac:this.Xv.bind(this),pc:this.Zv.bind(this),qc:this.Jv.bind(this)};this.pv=new yn(this.Kv.canvas,o,{xc:!1,Sc:!0})}return t.prototype.fn=function(){this.pv.fn(),this.Kv.unsubscribeCanvasConfigured(this.qv),this.Kv.destroy(),this.Yv.unsubscribeCanvasConfigured(this.Rv),this.Yv.destroy(),null!==this.Zt&&(this.Zt.nh().on(this),this.Zt.Ns().on(this)),this.Zt=null,null!==this.zv&&(clearTimeout(this.zv),this.zv=null),this.Iv.fn()},t.prototype.Nv=function(){return this.Mv},t.prototype.Gv=function(){return this.Si.backgroundColor},t.prototype.N=function(){return y(this.Zt).O().borderColor},t.prototype.Qv=function(){return this.Si.textColor},t.prototype.Bt=function(){return this.Si.fontSize},t.prototype.t_=function(){return At(this.Bt(),this.Si.fontFamily)},t.prototype.i_=function(){var t=this.af.O(),i=this.Dv!==t.et,n=this.co!==t.gt;return(i||n)&&(this.Uv(t),this.Dv=t.et),n&&(this.Ov.tr(),this.co=t.gt),t},t.prototype.n_=function(){if(!this.Yt()||null===this.Zt)return 0;var t=34,i=this.i_(),n=on(this.Yv.canvas),e=this.Zt.qn();n.font=this.t_(),e.length>0&&(t=Math.max(this.Ov.At(n,e[0].Rn),this.Ov.At(n,e[e.length-1].Rn)));for(var s=this.s_(),r=s.length;r--;){var h=this.Ov.At(n,s[r].Et());h>t&&(t=h)}var o=Math.ceil(i.xt+i.Nt+i.Tt+i.Ct+t);return o+o%2},t.prototype.h_=function(t){if(t.st<0||t.ht<0)throw new Error("Try to set invalid size to PriceAxisWidget "+JSON.stringify(t));null!==this.Vv&&this.Vv._n(t)||(this.Vv=t,this.Yv.resizeCanvas({width:t.st,height:t.ht}),this.Kv.resizeCanvas({width:t.st,height:t.ht}),this.Mv.style.width=t.st+"px",this.Mv.style.height=t.ht+"px",this.Mv.style.minWidth=t.st+"px")},t.prototype.r_=function(){return y(this.Vv).st},t.prototype.ci=function(t){this.Zt!==t&&(null!==this.Zt&&(this.Zt.nh().on(this),this.Zt.Ns().on(this)),this.Zt=t,t.nh().sn(this.ss.bind(this),this))},t.prototype.X=function(){return this.Zt},t.prototype.Yt=function(){return this.Pv},t.prototype.e_=function(t){t!==this.Pv&&(this.Mv.style.display=t?"table-cell":"none",this.Pv=t)},t.prototype.u_=function(t){var i=this.wi.o_();this.wi.jv().ct().Wl(i,y(this.X()),t)},t.prototype.tr=function(){var t=this.wi.o_();this.wi.jv().ct().Ul(t,y(this.X()))},t.prototype.a_=function(t){if(this.Pv&&null!==this.Vv){if(1!==t){var i=on(this.Yv.canvas);this.l_(),this.f_(i,this.Yv.pixelRatio),this.Pu(i,this.Yv.pixelRatio),this.c_(i,this.Yv.pixelRatio),this.v_(i,this.Yv.pixelRatio)}var n=on(this.Kv.canvas),e=this.Vv.st,s=this.Vv.ht;Y(n,this.Kv.pixelRatio,function(){n.clearRect(0,0,e,s)}),this.__(n,this.Kv.pixelRatio)}},t.prototype.Sv=function(){return this.Yv.canvas},t.prototype.d_=function(){return this.Hv},t.prototype.gv=function(t){if(null!==this.Zt&&!this.Zt.Gt()&&this.wi.jv().O().handleScale.axisPressedMouseMove.price){var i=this.wi.jv().ct(),n=this.wi.o_();this.Fv=!0,i.Vl(n,this.Zt,t.Jc)}},t.prototype.yv=function(t){if(null!==this.Zt&&this.wi.jv().O().handleScale.axisPressedMouseMove.price){var i=this.wi.jv().ct(),n=this.wi.o_(),e=this.Zt;i.zl(n,e,t.Jc)}},t.prototype.$v=function(){if(null!==this.Zt&&this.wi.jv().O().handleScale.axisPressedMouseMove.price){var t=this.wi.jv().ct(),i=this.wi.o_(),n=this.Zt;this.Fv&&(this.Fv=!1,t.Fl(i,n))}},t.prototype.kv=function(t){if(null!==this.Zt&&this.wi.jv().O().handleScale.axisPressedMouseMove.price){var i=this.wi.jv().ct(),n=this.wi.o_();this.Fv=!1,i.Fl(n,this.Zt)}},t.prototype.Xv=function(t){this.wi.jv().O().handleScale.axisDoubleClickReset&&this.tr()},t.prototype.Zv=function(t){null!==this.Zt&&(!this.wi.jv().ct().O().handleScale.axisPressedMouseMove.price||this.Zt.Ss()||this.Zt.Ds()||this.w_(1))},t.prototype.Jv=function(t){this.w_(0)},t.prototype.s_=function(){var t=this,i=[],n=null===this.Zt?void 0:this.Zt;return function(e){for(var s=0;s<e.length;++s)for(var r=e[s].vi(t.wi.o_(),n),h=0;h<r.length;h++)i.push(r[h])}(this.wi.o_().Js()),i},t.prototype.f_=function(t,i){var n=this;if(null!==this.Vv){var e=this.Vv.st,s=this.Vv.ht;Y(t,i,function(){H(t,0,0,e,s,n.Gv())})}},t.prototype.Pu=function(t,i){if(null!==this.Vv&&null!==this.Zt&&this.Zt.O().borderVisible){t.save(),t.fillStyle=this.N();var n,e=Math.max(1,Math.floor(this.i_().xt*i));n=this.Hv?Math.floor(this.Vv.st*i)-e:0,t.fillRect(n,0,e,Math.ceil(this.Vv.ht*i)),t.restore()}},t.prototype.c_=function(t,i){if(null!==this.Vv&&null!==this.Zt){var n=this.Zt.qn();t.save(),t.strokeStyle=this.N(),t.font=this.t_(),t.fillStyle=this.N();var e=this.i_(),s=this.Zt.O().borderVisible&&this.Zt.O().drawTicks,r=this.Hv?Math.floor((this.Vv.st-e.Nt)*i-e.xt*i):Math.floor(e.xt*i),h=this.Hv?Math.round(r-e.Tt*i):Math.round(r+e.Nt*i+e.Tt*i),o=this.Hv?"right":"left",u=Math.max(1,Math.floor(i)),l=Math.floor(.5*i);if(s){var a=Math.round(e.Nt*i);t.beginPath();for(var c=0,f=n;c<f.length;c++){var p=f[c];t.rect(r,Math.round(p.Wn*i)-l,a,u)}t.fill()}t.fillStyle=this.Qv();for(var v=0,d=n;v<d.length;v++)p=d[v],this.Iv.Ev(t,p.Rn,h,Math.round(p.Wn*i),o);t.restore()}},t.prototype.l_=function(){if(null!==this.Vv&&null!==this.Zt){var t=this.Vv.ht/2,i=[],n=this.Zt.Js().slice(),e=this.wi.o_(),s=this.i_();this.Zt===e.Ci()&&this.wi.o_().Js().forEach(function(t){e.eo(t)&&n.push(t)});var r=this.Zt.Zs()[0],h=this.Zt;n.forEach(function(n){var s=n.vi(e,h);s.forEach(function(t){t.Ht(null),t.Yt()&&i.push(t)}),r===n&&s.length>0&&(t=s[0].Vt())});var o=i.filter(function(i){return i.Vt()<=t}),u=i.filter(function(i){return i.Vt()>t});if(o.sort(function(t,i){return i.Vt()-t.Vt()}),o.length&&u.length&&u.push(o[0]),u.sort(function(t,i){return t.Vt()-i.Vt()}),i.forEach(function(t){return t.Ht(t.Vt())}),this.Zt.O().alignLabels){for(var l=1;l<o.length;l++){var a=o[l],c=(p=o[l-1]).wt(s,!1);a.Vt()>(v=p.qt())-c&&a.Ht(v-c)}for(var f=1;f<u.length;f++){var p,v;a=u[f],c=(p=u[f-1]).wt(s,!0),a.Vt()<(v=p.qt())+c&&a.Ht(v+c)}}}},t.prototype.v_=function(t,i){var n=this;if(null!==this.Vv){t.save();var e=this.Vv,s=this.s_(),r=this.i_(),h=this.Hv?"right":"left";s.forEach(function(s){if(s.Kt()){var o=s.I(y(n.Zt));t.save(),o.s(t,r,n.Ov,e.st,h,i),t.restore()}}),t.restore()}},t.prototype.__=function(t,i){var n=this;if(null!==this.Vv&&null!==this.Zt){t.save();var e=this.Vv,s=this.wi.jv().ct(),r=[],h=this.wi.o_(),o=s.Sf().vi(h,this.Zt);o.length&&r.push(o);var u=this.i_(),l=this.Hv?"right":"left";r.forEach(function(s){s.forEach(function(s){t.save(),s.I(y(n.Zt)).s(t,u,n.Ov,e.st,l,i),t.restore()})}),t.restore()}},t.prototype.w_=function(t){this.Mv.style.cursor=1===t?"ns-resize":"default"},t.prototype.ss=function(){var t=this,i=this.n_();if(this.Wv<i){var n=this.wi.jv();null===this.zv&&(this.zv=setTimeout(function(){n&&n.ct()._f(),t.zv=null},100))}this.Wv=i},t.prototype.Uv=function(t){this.Iv.fn(),this.Iv=new _n(t.Bt,t.et,t.Be)},t}(),Cn=dn,xn=function(){function t(t,i){var n=this;this.Vv=new rn(0,0),this.M_=null,this.b_=null,this.m_=null,this.p_=!1,this.g_=new rt,this.y_=0,this.k_=!1,this.N_=null,this.x_=!1,this.S_=null,this.Rv=function(){return n.D_&&n.ni().ee()},this.qv=function(){return n.D_&&n.ni().ee()},this.T_=t,this.D_=i,this.D_.Hl().sn(this.C_.bind(this),this,!0),this.E_=document.createElement("td"),this.E_.style.padding="0",this.E_.style.position="relative";var e=document.createElement("div");e.style.width="100%",e.style.height="100%",e.style.position="relative",e.style.overflow="hidden",this.A_=document.createElement("td"),this.A_.style.padding="0",this.L_=document.createElement("td"),this.L_.style.padding="0",this.E_.appendChild(e),this.Yv=an(e,new rn(16,16)),this.Yv.subscribeCanvasConfigured(this.Rv);var s=this.Yv.canvas;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Kv=an(e,new rn(16,16)),this.Kv.subscribeCanvasConfigured(this.qv);var r=this.Kv.canvas;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.wv=document.createElement("tr"),this.wv.appendChild(this.A_),this.wv.appendChild(this.E_),this.wv.appendChild(this.L_),this.B_();var h=this.jv().O().handleScroll;this.pv=new yn(this.Kv.canvas,this,{xc:!h.vertTouchDrag,Sc:!h.horzTouchDrag})}return t.prototype.fn=function(){null!==this.M_&&this.M_.fn(),null!==this.b_&&this.b_.fn(),this.Kv.unsubscribeCanvasConfigured(this.qv),this.Kv.destroy(),this.Yv.unsubscribeCanvasConfigured(this.Rv),this.Yv.destroy(),null!==this.D_&&this.D_.Hl().on(this),this.pv.fn()},t.prototype.o_=function(){return y(this.D_)},t.prototype.V_=function(){return this.D_},t.prototype.z_=function(i){null!==this.D_&&this.D_.Hl().on(this),this.D_=i,null!==this.D_&&this.D_.Hl().sn(t.prototype.C_.bind(this),this,!0),this.B_()},t.prototype.jv=function(){return this.T_},t.prototype.Nv=function(){return this.wv},t.prototype.B_=function(){if(null!==this.D_&&(this.F_(),0!==this.ni().V().length)){if(null!==this.M_){var t=this.D_.Ll();this.M_.ci(y(t))}if(null!==this.b_){var i=this.D_.Bl();this.b_.ci(y(i))}}},t.prototype.Sl=function(){return null!==this.D_?this.D_.Sl():0},t.prototype.Dl=function(t){this.D_&&this.D_.Dl(t)},t.prototype.pc=function(t){if(this.D_){var i=t.Zc,n=t.Jc;fn||this.P_(i,n)}},t.prototype.zc=function(t){if(this.k_=!1,this.x_=null!==this.N_,this.D_){if(document.activeElement!==document.body&&document.activeElement!==document.documentElement)y(document.activeElement).blur();else{var i=document.getSelection();null!==i&&i.removeAllRanges()}var n=this.ni();if(!this.D_.Ci().Gt()&&!n.U().Gt()){if(null!==this.N_){var e=n.Sf();this.S_={x:e.Mt(),y:e.bt()},this.N_={x:t.Zc,y:t.Jc}}fn||this.P_(t.Zc,t.Jc)}}},t.prototype.gc=function(t){if(this.D_){var i=t.Zc,n=t.Jc;if(this.O_()&&this.I_(),!fn){this.P_(i,n);var e=this.vo(i,n);this.ni().bf(e&&{mf:e.mf,W_:e.W_}),null!==e&&void 0!==e.hv.R_&&e.hv.R_(i,n)}}},t.prototype.Lc=function(t){if(null!==this.D_){var i=t.Zc,n=t.Jc,e=this.vo(i,n);if(null!==e&&void 0!==e.hv.U_&&e.hv.U_(i,n),this.g_.ln()){var s=this.ni().Sf().R();this.g_.an(s,{x:i,y:n})}this.j_()}},t.prototype.Dc=function(t){if(null!==this.D_){var i=this.ni(),n=t.Zc,e=t.Jc;if(null!==this.N_){this.x_=!1;var s=y(this.S_),r=s.x+(n-this.N_.x),h=s.y+(e-this.N_.y);this.P_(r,h)}else this.O_()||this.P_(n,e);if(!i.U().Gt()){var o=this.T_.O().handleScroll;if(o.pressedMouseMove&&"touch"!==t.nv||(o.horzTouchDrag||o.vertTouchDrag)&&"mouse"!==t.nv){var u=this.D_.Ci();null!==this.m_||this.q_()||(this.m_={x:t.Yc,y:t.Kc}),null===this.m_||this.m_.x===t.Yc&&this.m_.y===t.Kc||this.p_||(u.Gt()||i.Pl(this.D_,u,t.Jc),i.Bf(t.Zc),this.p_=!0),this.p_&&(u.Gt()||i.Ol(this.D_,u,t.Jc),i.Vf(t.Zc))}}}},t.prototype.Ec=function(t){if(null!==this.D_){this.k_=!1;var i=this.ni();if(this.p_){var n=this.D_.Ci();i.Il(this.D_,n),i.zf(),this.m_=null,this.p_=!1}}},t.prototype.Hc=function(t){if(this.k_=!0,null===this.N_&&Cn){var i={m:t.Zc,p:t.Jc};this.H_(i,i)}},t.prototype.qc=function(t){null!==this.D_&&(this.D_.ct().bf(null),dn||this.I_())},t.prototype.Y_=function(){return this.g_},t.prototype.Oc=function(){this.y_=1},t.prototype.Ic=function(t,i){if(this.T_.O().handleScale.pinch){var n=5*(i-this.y_);this.y_=i,this.ni().Af(t.m,n)}},t.prototype.vo=function(t,i){var n=this.D_;if(null===n)return null;for(var e=0,s=n.Js();e<s.length;e++){var r=s[e],h=this.K_(r._i(n),t,i);if(null!==h)return{mf:r,hv:h.hv,W_:h.W_}}return null},t.prototype.X_=function(t,i){y("left"===i?this.M_:this.b_).h_(new rn(t,this.Vv.ht))},t.prototype.xv=function(){return this.Vv},t.prototype.h_=function(t){if(t.st<0||t.ht<0)throw new Error("Try to set invalid size to PaneWidget "+JSON.stringify(t));this.Vv._n(t)||(this.Vv=t,this.Yv.resizeCanvas({width:t.st,height:t.ht}),this.Kv.resizeCanvas({width:t.st,height:t.ht}),this.E_.style.width=t.st+"px",this.E_.style.height=t.ht+"px")},t.prototype.Z_=function(){var t=y(this.D_);t.Al(t.Ll()),t.Al(t.Bl());for(var i=0,n=t.Zs();i<n.length;i++){var e=n[i];if(t.eo(e)){var s=e.X();null!==s&&t.Al(s),e.ji()}}},t.prototype.Sv=function(){return this.Yv.canvas},t.prototype.a_=function(t){if(0!==t&&null!==this.D_){if(t>1&&this.Z_(),null!==this.M_&&this.M_.a_(t),null!==this.b_&&this.b_.a_(t),1!==t){var i=on(this.Yv.canvas);i.save(),this.f_(i,this.J_(),this.Yv.pixelRatio),this.D_&&(this.G_(i,this.Yv.pixelRatio),this.Q_(i,this.Yv.pixelRatio),this.td(i,this.Yv.pixelRatio)),i.restore()}var n=on(this.Kv.canvas);n.clearRect(0,0,Math.ceil(this.Vv.st*this.Kv.pixelRatio),Math.ceil(this.Vv.ht*this.Kv.pixelRatio)),this.nd(n,this.Kv.pixelRatio)}},t.prototype.sd=function(){return this.M_},t.prototype.hd=function(){return this.b_},t.prototype.J_=function(){return this.T_.O().layout.backgroundColor},t.prototype.C_=function(){null!==this.D_&&this.D_.Hl().on(this),this.D_=null},t.prototype.f_=function(t,i,n){var e=this;Y(t,n,function(){H(t,0,0,e.Vv.st,e.Vv.ht,i)})},t.prototype.G_=function(t,i){for(var n=y(this.D_),e=this.ni().Nf()._i(n),s=n.wt(),r=n.dt(),h=0,o=e;h<o.length;h++){var u=o[h];t.save();var l=u.I(s,r);null!==l&&l.s(t,i,!1),t.restore()}},t.prototype.Q_=function(t,i){var n=this.ni().xf();null!==n&&(this.rd(n,t,i),this.ed(n,t,i))},t.prototype.nd=function(t,i){this.ed(this.ni().Sf(),t,i)},t.prototype.td=function(t,i){for(var n=y(this.D_).Js(),e=0,s=n;e<s.length;e++){var r=s[e];this.rd(r,t,i)}for(var h=0,o=n;h<o.length;h++)r=o[h],this.ed(r,t,i)},t.prototype.ed=function(t,i,n){for(var e=y(this.D_),s=t._i(e),r=e.wt(),h=e.dt(),o=e.ct().Mf(),u=null!==o&&o.mf===t,l=null!==o&&u&&void 0!==o.W_?o.W_._o:void 0,a=0,c=s;a<c.length;a++){var f=c[a].I(r,h);null!==f&&(i.save(),f.s(i,n,u,l),i.restore())}},t.prototype.rd=function(t,i,n){for(var e=y(this.D_),s=t._i(e),r=e.wt(),h=e.dt(),o=e.ct().Mf(),u=null!==o&&o.mf===t,l=null!==o&&u&&void 0!==o.W_?o.W_._o:void 0,a=0,c=s;a<c.length;a++){var f=c[a].I(r,h);null!==f&&void 0!==f.u&&(i.save(),f.u(i,n,u,l),i.restore())}},t.prototype.K_=function(t,i,n){for(var e=0,s=t;e<s.length;e++){var r=s[e],h=r.I(this.Vv.ht,this.Vv.st);if(null!==h&&h.vo){var o=h.vo(i,n);if(null!==o)return{hv:r,W_:o}}}return null},t.prototype.F_=function(){if(null!==this.D_){var t=this.T_;t.O().leftPriceScale.visible||null===this.M_||(this.A_.removeChild(this.M_.Nv()),this.M_.fn(),this.M_=null),t.O().rightPriceScale.visible||null===this.b_||(this.L_.removeChild(this.b_.Nv()),this.b_.fn(),this.b_=null);var i=t.ct().qf();t.O().leftPriceScale.visible&&null===this.M_&&(this.M_=new Sn(this,t.O().layout,i,"left"),this.A_.appendChild(this.M_.Nv())),t.O().rightPriceScale.visible&&null===this.b_&&(this.b_=new Sn(this,t.O().layout,i,"right"),this.L_.appendChild(this.b_.Nv()))}},t.prototype.O_=function(){return Cn&&null===this.N_},t.prototype.q_=function(){return Cn&&this.k_||null!==this.N_},t.prototype.ud=function(t){return Math.max(0,Math.min(t,this.Vv.st-1))},t.prototype.od=function(t){return Math.max(0,Math.min(t,this.Vv.ht-1))},t.prototype.P_=function(t,i){this.ni().If(this.ud(t),this.od(i),y(this.D_))},t.prototype.I_=function(){this.ni().Rf()},t.prototype.j_=function(){this.x_&&(this.N_=null,this.I_())},t.prototype.H_=function(t,i){this.N_=t,this.x_=!1,this.P_(i.x,i.y);var n=this.ni().Sf();this.S_={x:n.Mt(),y:n.bt()}},t.prototype.ni=function(){return this.T_.ct()},t}(),Gn=function(){function t(t,i,n,e){var s=this;this.C=!0,this.Vv=new rn(0,0),this.Rv=function(){return s.a_(3)},this.Hv="left"===t,this.af=n.qf,this.Si=i,this.ad=e,this.Mv=document.createElement("div"),this.Mv.style.width="25px",this.Mv.style.height="100%",this.Mv.style.overflow="hidden",this.Yv=an(this.Mv,new rn(16,16)),this.Yv.subscribeCanvasConfigured(this.Rv)}return t.prototype.fn=function(){this.Yv.unsubscribeCanvasConfigured(this.Rv),this.Yv.destroy()},t.prototype.B=function(){this.C=!0},t.prototype.Nv=function(){return this.Mv},t.prototype.xv=function(){return this.Vv},t.prototype.h_=function(t){if(t.st<0||t.ht<0)throw new Error("Try to set invalid size to PriceAxisStub "+JSON.stringify(t));this.Vv._n(t)||(this.Vv=t,this.Yv.resizeCanvas({width:t.st,height:t.ht}),this.Mv.style.width=t.st+"px",this.Mv.style.minWidth=t.st+"px",this.Mv.style.height=t.ht+"px",this.C=!0)},t.prototype.a_=function(t){if((!(t<3)||this.C)&&0!==this.Vv.st&&0!==this.Vv.ht){this.C=!1;var i=on(this.Yv.canvas);this.f_(i,this.Yv.pixelRatio),this.Pu(i,this.Yv.pixelRatio)}},t.prototype.Sv=function(){return this.Yv.canvas},t.prototype.d_=function(){return this.Hv},t.prototype.Pu=function(t,i){if(this.ad()){var n=this.Vv.st;t.save(),t.fillStyle=this.Si.timeScale.borderColor;var e=Math.floor(this.af.O().xt*i),s=this.Hv?Math.round(n*i)-e:0;t.fillRect(s,0,e,e),t.restore()}},t.prototype.f_=function(t,i){var n=this;Y(t,i,function(){H(t,0,0,n.Vv.st,n.Vv.ht,n.Si.layout.backgroundColor)})},t}();function Tn(t,i){return t.ir>i.ir?t:i}var En=function(){function t(t){var i=this;this.ld=null,this.fd=null,this.Le=null,this.vd=!1,this.Vv=new rn(0,0),this.Rv=function(){return i.T_.ct().ee()},this.qv=function(){return i.T_.ct().ee()},this.T_=t,this.Si=t.O().layout,this._d=document.createElement("tr"),this.dd=document.createElement("td"),this.dd.style.padding="0",this.wd=document.createElement("td"),this.wd.style.padding="0",this.Mv=document.createElement("td"),this.Mv.style.height="25px",this.Mv.style.padding="0",this.Md=document.createElement("div"),this.Md.style.width="100%",this.Md.style.height="100%",this.Md.style.position="relative",this.Md.style.overflow="hidden",this.Mv.appendChild(this.Md),this.Yv=an(this.Md,new rn(16,16)),this.Yv.subscribeCanvasConfigured(this.Rv);var n=this.Yv.canvas;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Kv=an(this.Md,new rn(16,16)),this.Kv.subscribeCanvasConfigured(this.qv);var e=this.Kv.canvas;e.style.position="absolute",e.style.zIndex="2",e.style.left="0",e.style.top="0",this._d.appendChild(this.dd),this._d.appendChild(this.Mv),this._d.appendChild(this.wd),this.bd(),this.T_.ct().xl().sn(this.bd.bind(this),this),this.pv=new yn(this.Kv.canvas,this,{xc:!0,Sc:!1})}return t.prototype.fn=function(){this.pv.fn(),null!==this.ld&&this.ld.fn(),null!==this.fd&&this.fd.fn(),this.Kv.unsubscribeCanvasConfigured(this.qv),this.Kv.destroy(),this.Yv.unsubscribeCanvasConfigured(this.Rv),this.Yv.destroy()},t.prototype.Nv=function(){return this._d},t.prototype.md=function(){return this.ld},t.prototype.pd=function(){return this.fd},t.prototype.zc=function(t){if(!this.vd){this.vd=!0;var i=this.T_.ct();!i.U().Gt()&&this.T_.O().handleScale.axisPressedMouseMove.time&&i.Ef(t.Zc)}},t.prototype.Fc=function(){var t=this.T_.ct();!t.U().Gt()&&this.vd&&(this.vd=!1,this.T_.O().handleScale.axisPressedMouseMove.time&&t.Pf())},t.prototype.Dc=function(t){var i=this.T_.ct();!i.U().Gt()&&this.T_.O().handleScale.axisPressedMouseMove.time&&i.Ff(t.Zc)},t.prototype.Ec=function(t){this.vd=!1;var i=this.T_.ct();i.U().Gt()&&!this.T_.O().handleScale.axisPressedMouseMove.time||i.Pf()},t.prototype.Ac=function(){this.T_.O().handleScale.axisDoubleClickReset&&this.T_.ct().Of()},t.prototype.pc=function(t){this.T_.ct().O().handleScale.axisPressedMouseMove.time&&this.w_(1)},t.prototype.qc=function(t){this.w_(0)},t.prototype.xv=function(){return this.Vv},t.prototype.gd=function(t,i,n){this.Vv&&this.Vv._n(t)||(this.Vv=t,this.Yv.resizeCanvas({width:t.st,height:t.ht}),this.Kv.resizeCanvas({width:t.st,height:t.ht}),this.Mv.style.width=t.st+"px",this.Mv.style.height=t.ht+"px"),null!==this.ld&&this.ld.h_(new rn(i,t.ht)),null!==this.fd&&this.fd.h_(new rn(n,t.ht))},t.prototype.dt=function(){return this.Vv.st},t.prototype.wt=function(){return this.Vv.ht},t.prototype.yd=function(){var t=this.kd();return Math.ceil(t.xt+t.Nt+t.Bt+t.St+t.Dt)},t.prototype.B=function(){this.T_.ct().U().qn()},t.prototype.Sv=function(){return this.Yv.canvas},t.prototype.a_=function(t){if(0!==t){if(1!==t){var i=on(this.Yv.canvas);this.f_(i,this.Yv.pixelRatio),this.Pu(i,this.Yv.pixelRatio),this.c_(i,this.Yv.pixelRatio),null!==this.ld&&this.ld.a_(t),null!==this.fd&&this.fd.a_(t)}var n=on(this.Kv.canvas),e=this.Kv.pixelRatio;n.clearRect(0,0,Math.ceil(this.Vv.st*e),Math.ceil(this.Vv.ht*e)),this.Nd([this.T_.ct().Sf()],n,e)}},t.prototype.f_=function(t,i){var n=this;Y(t,i,function(){H(t,0,0,n.Vv.st,n.Vv.ht,n.J_())})},t.prototype.Pu=function(t,i){if(this.T_.O().timeScale.borderVisible){t.save(),t.fillStyle=this.xd();var n=Math.max(1,Math.floor(this.kd().xt*i));t.fillRect(0,0,Math.ceil(this.Vv.st*i),n),t.restore()}},t.prototype.c_=function(t,i){var n=this,e=this.T_.ct().U().qn();if(e&&0!==e.length){var s=e.reduce(Tn,e[0]).ir;s>30&&s<40&&(s=30),t.save(),t.strokeStyle=this.xd();var r=this.kd(),h=r.xt+r.Nt+r.St+r.Bt-r.Lt;t.textAlign="center",t.fillStyle=this.xd();var o=Math.floor(this.kd().xt*i),u=Math.max(1,Math.floor(i)),l=Math.floor(.5*i);if(this.T_.ct().U().O().borderVisible){t.beginPath();for(var a=Math.round(r.Nt*i),c=e.length;c--;){var f=Math.round(e[c].Wn*i);t.rect(f-l,o,u,a)}t.fill()}t.fillStyle=this.Fe(),Y(t,i,function(){t.font=n.Sd();for(var i=0,r=e;i<r.length;i++)(l=r[i]).ir<s&&t.fillText(l.Rn,l.Wn,h);t.font=n.Dd();for(var o=0,u=e;o<u.length;o++){var l;(l=u[o]).ir>=s&&t.fillText(l.Rn,l.Wn,h)}})}},t.prototype.Nd=function(t,i,n){for(var e=this.kd(),s=0,r=t;s<r.length;s++)for(var h=0,o=r[s].di();h<o.length;h++){var u=o[h];i.save(),u.I().s(i,e,n),i.restore()}},t.prototype.J_=function(){return this.Si.backgroundColor},t.prototype.xd=function(){return this.T_.O().timeScale.borderColor},t.prototype.Fe=function(){return this.Si.textColor},t.prototype.Ve=function(){return this.Si.fontSize},t.prototype.Sd=function(){return At(this.Ve(),this.Si.fontFamily)},t.prototype.Dd=function(){return At(this.Ve(),this.Si.fontFamily,"bold")},t.prototype.kd=function(){null===this.Le&&(this.Le={xt:1,Lt:NaN,St:NaN,Dt:NaN,ii:NaN,Nt:3,Bt:NaN,gt:"",ti:new mi});var t=this.Le,i=this.Sd();if(t.gt!==i){var n=this.Ve();t.Bt=n,t.gt=i,t.St=Math.ceil(n/2.5),t.Dt=t.St,t.ii=Math.ceil(n/2),t.Lt=Math.round(this.Ve()/5),t.ti.tr()}return this.Le},t.prototype.w_=function(t){this.Mv.style.cursor=1===t?"ew-resize":"default"},t.prototype.bd=function(){var t=this.T_.ct(),i=t.O();i.leftPriceScale.visible||null===this.ld||(this.dd.removeChild(this.ld.Nv()),this.ld.fn(),this.ld=null),i.rightPriceScale.visible||null===this.fd||(this.wd.removeChild(this.fd.Nv()),this.fd.fn(),this.fd=null);var n={qf:this.T_.ct().qf()};if(i.leftPriceScale.visible&&null===this.ld){var e=function(){return i.leftPriceScale.borderVisible&&t.U().O().borderVisible};this.ld=new Gn("left",this.T_.O(),n,e),this.dd.appendChild(this.ld.Nv())}i.rightPriceScale.visible&&null===this.fd&&(e=function(){return i.rightPriceScale.borderVisible&&t.U().O().borderVisible},this.fd=new Gn("right",this.T_.O(),n,e),this.wd.appendChild(this.fd.Nv()))},t}(),Bn=function(){function t(t,i){this.Td=[],this.Cd=[],this.Ed=0,this.Hn=0,this.pr=0,this.Ad=0,this.Ld=0,this.Bd=null,this.Vd=!1,this.g_=new rt,this.ef=new rt,this.Si=i,this._d=document.createElement("div"),this._d.classList.add("tv-lightweight-charts"),this._d.style.overflow="hidden",this._d.style.width="100%",this._d.style.height="100%",this.zd=document.createElement("table"),this.zd.setAttribute("cellspacing","0"),this._d.appendChild(this.zd),this.Fd=this.Pd.bind(this),this._d.addEventListener("wheel",this.Fd,{passive:!1}),this.ni=new sn(this.uf.bind(this),this.Si),this.ct().Df().sn(this.Od.bind(this),this),this.Id=new En(this),this.zd.appendChild(this.Id.Nv());var n=this.Si.width,e=this.Si.height;if(0===n||0===e){var s=t.getBoundingClientRect();0===n&&(n=Math.floor(s.width),n-=n%2),0===e&&(e=Math.floor(s.height),e-=e%2)}n=Math.max(70,n),e=Math.max(50,e),this.Wd(n,e),this.Rd(),t.appendChild(this._d),this.Ud(),this.ni.U().ge().sn(this.ni._f.bind(this.ni),this),this.ni.xl().sn(this.ni._f.bind(this.ni),this)}return t.prototype.ct=function(){return this.ni},t.prototype.O=function(){return this.Si},t.prototype._v=function(){return this.Td},t.prototype.fn=function(){this._d.removeEventListener("wheel",this.Fd),0!==this.Ed&&window.cancelAnimationFrame(this.Ed),this.ni.Df().on(this),this.ni.U().ge().on(this),this.ni.xl().on(this),this.ni.fn();for(var t=0,i=this.Td;t<i.length;t++){var n=i[t];this.zd.removeChild(n.Nv()),n.Y_().on(this),n.fn()}this.Td=[];for(var e=0,s=this.Cd;e<s.length;e++){var r=s[e];this.jd(r)}this.Cd=[],y(this.Id).fn(),null!==this._d.parentElement&&this._d.parentElement.removeChild(this._d),this.ef.fn(),this.g_.fn(),delete this._d},t.prototype.Wd=function(t,i,n){if(void 0===n&&(n=!1),this.Hn!==i||this.pr!==t){this.Hn=i,this.pr=t;var e=i+"px",s=t+"px";y(this._d).style.height=e,y(this._d).style.width=s,this.zd.style.height=e,this.zd.style.width=s,n?this.qd(new jt(3)):this.ni._f()}},t.prototype.a_=function(t){void 0===t&&(t=new jt(3));for(var i=0;i<this.Td.length;i++)this.Td[i].a_(t.iu(i).Ge);this.Id.a_(t.tu())},t.prototype.ms=function(t){this.ni.ms(t),this.Ud();var i=t.width||this.pr,n=t.height||this.Hn;this.Wd(i,n)},t.prototype.Y_=function(){return this.g_},t.prototype.Df=function(){return this.ef},t.prototype.Hd=function(){var t=this;null!==this.Bd&&(this.qd(this.Bd),this.Bd=null);var i=this.Td[0],n=ln(document,new rn(this.pr,this.Hn)),e=on(n),s=hn(n);return Y(e,s,function(){var n=0,s=0,r=function(i){for(var r=0;r<t.Td.length;r++){var h=t.Td[r],o=h.xv().ht,u=y("left"===i?h.sd():h.hd()),l=u.Sv();if(e.drawImage(l,n,s,u.r_(),o),s+=o,r<t.Td.length-1){var a=t.Cd[r],c=a.xv(),f=a.Sv();e.drawImage(f,n,s,c.st,c.ht),s+=c.ht}}};t.Yd()&&(r("left"),n=y(i.sd()).r_()),s=0;for(var h=0;h<t.Td.length;h++){var o=t.Td[h],u=o.xv(),l=o.Sv();if(e.drawImage(l,n,s,u.st,u.ht),s+=u.ht,h<t.Td.length-1){var a=t.Cd[h],c=a.xv(),f=a.Sv();e.drawImage(f,n,s,c.st,c.ht),s+=c.ht}}n+=i.xv().st,t.Kd()&&(s=0,r("right"));var p=function(i){var r=y("left"===i?t.Id.md():t.Id.pd()),h=r.xv(),o=r.Sv();e.drawImage(o,n,s,h.st,h.ht)};if(t.Si.timeScale.visible){n=0,t.Yd()&&(p("left"),n=y(i.sd()).r_());var v=t.Id.xv();l=t.Id.Sv(),e.drawImage(l,n,s,v.st,v.ht),t.Kd()&&(n=i.xv().st,p("right"),e.restore())}}),n},t.prototype.$d=function(t){return"none"===t?0:"left"===t&&!this.Yd()||"right"===t&&!this.Kd()?0:0===this.Td.length?0:y("left"===t?this.Td[0].sd():this.Td[0].hd()).r_()},t.prototype.Xd=function(){for(var t=0,i=0,n=0,e=0,s=this.Td;e<s.length;e++){var r=s[e];this.Yd()&&(i=Math.max(i,y(r.sd()).n_())),this.Kd()&&(n=Math.max(n,y(r.hd()).n_())),t+=r.Sl()}var h=this.pr,o=this.Hn,u=Math.max(h-i-n,0),l=1*this.Cd.length,a=this.Si.timeScale.visible?this.Id.yd():0;a%2&&(a+=1);for(var c=l+a,f=o<c?0:o-c,p=f/t,v=0,d=0;d<this.Td.length;++d){(r=this.Td[d]).z_(this.ni.kf()[d]);var w,g;g=d===this.Td.length-1?f-v:Math.round(r.Sl()*p),v+=w=Math.max(g,2),r.h_(new rn(u,w)),this.Yd()&&r.X_(i,"left"),this.Kd()&&r.X_(n,"right"),r.o_()&&this.ni.Tf(r.o_(),w)}this.Id.gd(new rn(u,a),i,n),this.ni.Zr(u),this.Ad!==i&&(this.Ad=i),this.Ld!==n&&(this.Ld=n)},t.prototype.Pd=function(t){var i=t.deltaX/100,n=-t.deltaY/100;if(0!==i&&this.Si.handleScroll.mouseWheel||0!==n&&this.Si.handleScale.mouseWheel){switch(t.cancelable&&t.preventDefault(),t.deltaMode){case t.DOM_DELTA_PAGE:i*=120,n*=120;break;case t.DOM_DELTA_LINE:i*=32,n*=32}if(0!==n&&this.Si.handleScale.mouseWheel){var e=Math.sign(n)*Math.min(1,Math.abs(n)),s=t.clientX-this._d.getBoundingClientRect().left;this.ct().Af(s,e)}0!==i&&this.Si.handleScroll.mouseWheel&&this.ct().Lf(-80*i)}},t.prototype.qd=function(t){var i=t.tu();if(3===i&&this.Zd(),3===i||2===i){for(var n=this.ni.kf(),e=0;e<n.length;e++)t.iu(e).Ts&&n[e].jl();t.su()&&this.ni.U().ke();var s=t.hu();null!==s&&this.ni.U().Ne(s),this.Id.B()}this.a_(t)},t.prototype.uf=function(t){var i=this;null!==this.Bd?this.Bd.gn(t):this.Bd=t,this.Vd||(this.Vd=!0,this.Ed=window.requestAnimationFrame(function(){i.Vd=!1,i.Ed=0,null!==i.Bd&&(i.qd(i.Bd),i.Bd=null)}))},t.prototype.Zd=function(){this.Rd()},t.prototype.jd=function(t){this.zd.removeChild(t.Nv()),t.fn()},t.prototype.Rd=function(){for(var t=this.ni.kf(),i=t.length,n=this.Td.length,e=i;e<n;e++){var s=d(this.Td.pop());this.zd.removeChild(s.Nv()),s.Y_().on(this),s.fn(),void 0!==(r=this.Cd.pop())&&this.jd(r)}for(e=n;e<i;e++){if((s=new xn(this,t[e])).Y_().sn(this.Jd.bind(this),this),this.Td.push(s),e>1){var r=new Mn(this,e-1,e,!0);this.Cd.push(r),this.zd.insertBefore(r.Nv(),this.Id.Nv())}this.zd.insertBefore(s.Nv(),this.Id.Nv())}for(e=0;e<i;e++){var h=t[e];(s=this.Td[e]).o_()!==h?s.z_(h):s.B_()}this.Ud(),this.Xd()},t.prototype.Gd=function(t,i){var n,e=new Map;if(null!==t&&this.ni.V().forEach(function(i){var n=i.To(t);null!==n&&e.set(i,n)}),null!==t){var s=this.ni.U().si(t);null!==s&&(n=s)}var r=this.ct().Mf(),h=null!==r&&r.mf instanceof $i?r.mf:void 0,o=null!==r&&void 0!==r.W_?r.W_.wo:void 0;return{F:n,Qd:i||void 0,tw:h,iw:e,nw:o}},t.prototype.Jd=function(t,i){var n=this;this.g_.an(function(){return n.Gd(t,i)})},t.prototype.Od=function(t,i){var n=this;this.ef.an(function(){return n.Gd(t,i)})},t.prototype.Ud=function(){var t=this.Si.timeScale.visible?"":"none";this.Id.Nv().style.display=t},t.prototype.Yd=function(){return this.Si.leftPriceScale.visible},t.prototype.Kd=function(){return this.Si.rightPriceScale.visible},t}();function Vn(t){if(!Ut(t))throw new Error("time must be of type BusinessDay");var i=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{Rh:Math.round(i.getTime()/1e3),Wh:t}}function Ln(t){if(!Wt(t))throw new Error("time must be of type isUTCTimestamp");return{Rh:t}}function Dn(t){return 0===t.length?null:Ut(t[0].time)?Vn:Ln}function Rn(t){return Wt(t)?Ln(t):Ut(t)?Vn(t):Vn(Wn(t))}function On(t,i){var n=t.value,e=null;return"color"in t&&void 0!==t.color&&(e=i.Ko(t.color)),[n,n,n,n,e]}function kn(t,i){return[t.open,t.high,t.low,t.close,null]}var Nn={Candlestick:kn,Bar:kn,Area:On,Histogram:On,Line:On};function Pn(t){return Nn[t]}function Fn(t){return 60*t*60*1e3}function Zn(t){return 60*t*1e3}var zn=[{sw:1,ir:20},{sw:(1,1e3),ir:19},{sw:Zn(1),ir:20},{sw:Zn(5),ir:21},{sw:Zn(30),ir:22},{sw:Fn(1),ir:30},{sw:Fn(3),ir:31},{sw:Fn(6),ir:32},{sw:Fn(12),ir:33}];function In(t,i){if(null!==i){var n=new Date(1e3*i),e=new Date(1e3*t);if(e.getUTCFullYear()!==n.getUTCFullYear())return 70;if(e.getUTCMonth()!==n.getUTCMonth())return 60;if(e.getUTCDate()!==n.getUTCDate())return 50;for(var s=zn.length-1;s>=0;--s)if(Math.floor(n.getTime()/zn[s].sw)!==Math.floor(e.getTime()/zn[s].sw))return zn[s].ir}return 20}function Un(t,i){return t.Rh<i.Rh}function Wn(t){var i=new Date(t);if(isNaN(i.getTime()))throw new Error("Invalid date string="+t+", expected format=yyyy-mm-dd");return{day:i.getUTCDate(),month:i.getUTCMonth()+1,year:i.getUTCFullYear()}}function An(t){M(t.time)&&(t.time=Wn(t.time))}var Yn=function(){function t(){this.hw=new Map,this.rw=new Map,this.ew=[]}return t.prototype.fn=function(){this.hw.clear(),this.rw.clear(),this.ew=[]},t.prototype.uw=function(t,i){var n=this;t.tl(),i.forEach(An),this.hw.forEach(function(i){return i.ow.delete(t)});var e=Dn(i);null!==e&&i.forEach(function(i){var s=e(i.time),r=n.hw.get(s.Rh)||{Bi:0,ow:new Map,ih:s};r.ow.set(t,i),n.hw.set(s.Rh,r)});var s=new Map;return this.hw.forEach(function(t,i){t.ow.size>0&&s.set(i,t)}),this.aw(s)},t.prototype.Kf=function(t){return this.uw(t,[])},t.prototype.lw=function(t,i){An(i);var n=t.Ki();if(n.or()>0)if(void 0!==y(n.fa()).F.Wh){if(!Ut(i.time))throw new Error("time must be of type BusinessDay")}else if(!Wt(i.time))throw new Error("time must be of type isUTCTimestamp");var e=y(Dn([i]))(i.time),s=this.hw.get(e.Rh)||{Bi:0,ow:new Map,ih:e},r=0===s.ow.size;s.ow.set(t,i);var h=!1;if(r){var o=this.hw.size;this.ew.length>0&&this.ew[this.ew.length-1].Rh>e.Rh?(o=ni(this.ew,e,Un),this.ew.splice(o,0,e),this.fw(o),h=!0):this.ew.push(e),s.Bi=o,this.rw.set(s.Bi,e)}this.hw.set(e.Rh,s);var u=new Map,l=function(i){var n=d(a.rw.get(i));d(a.hw.get(n.Rh)).ow.forEach(function(e,s){if(h||s===t){var r=Pn(s.$o()),o=u.get(s)||{B:[]},l={Bi:i,F:n,Z:r(e,s.Zu())};o.B.push(l),u.set(s,o)}})},a=this;for(o=s.Bi;o<this.hw.size;++o)l(o);var c=r?this.cw(s.Bi):[],f=r?this.ew.slice(s.Bi):[];return{vw:{_w:u,dw:f,Bi:s.Bi,qn:c}}},t.prototype.aw=function(t){var i=this;this.hw=t,this.ew=Array.from(this.hw.values()).map(function(t){return t.ih}),this.ew.sort(function(t,i){return t.Rh-i.Rh});var n=new Map;this.ew.forEach(function(t,e){var s=d(i.hw.get(t.Rh));s.Bi=e,s.ow.forEach(function(i,s){var r=Pn(s.$o()),h=n.get(s)||{B:[]},o={Bi:e,F:t,Z:r(i,s.Zu())};h.B.push(o),n.set(s,h)})});var e=null,s=0,r=this.ew.map(function(t,i){s+=t.Rh-(e||t.Rh);var n=In(t.Rh,e);return e=t.Rh,{ir:n,F:t,Bi:i}});if(r.length>1){var h=Math.ceil(s/(r.length-1)),o=r[0].F.Rh-h;r[0].ir=In(r[0].F.Rh,o)}var u={_w:n,dw:this.ew.slice(),Bi:0,qn:r};return this.ww(),{vw:u}},t.prototype.fw=function(t){for(var i=this.rw.size-1;i>=t;--i){var n=d(this.rw.get(i)),e=i+1;d(this.hw.get(n.Rh)).Bi=e,this.rw.delete(i),this.rw.set(e,n)}},t.prototype.ww=function(){var t=this;this.rw.clear(),this.hw.forEach(function(i,n){t.rw.set(i.Bi,i.ih)})},t.prototype.cw=function(t){for(var i,n=[],e=(null===(i=this.rw.get(t-1))||void 0===i?void 0:i.Rh)||null,s=t;s<this.rw.size;++s){var r=d(this.rw.get(s)),h=In(r.Rh,e);e=r.Rh,n.push({ir:h,F:r,Bi:s})}return n},t}(),Hn={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,axisLabelVisible:!0},Kn=function(){function t(t){this.Io=t}return t.prototype.applyOptions=function(t){this.Io.ms(t)},t.prototype.options=function(){return this.Io.O()},t.prototype.Mw=function(){return this.Io},t}();function qn(t){var i=t.overlay,n=function(t,i){var n={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.indexOf(e)<0&&(n[e]=t[e]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(e=Object.getOwnPropertySymbols(t);s<e.length;s++)i.indexOf(e[s])<0&&Object.prototype.propertyIsEnumerable.call(t,e[s])&&(n[e[s]]=t[e[s]])}return n}(t,["overlay"]);return i&&(n.priceScaleId=""),n}var Xn=function(){function t(t,i,n){this.du=t,this.bw=i,this.mw=n}return t.prototype.fn=function(){delete this.du,delete this.bw},t.prototype.priceFormatter=function(){return this.du.ah()},t.prototype.pw=function(){return this.du},t.prototype.priceToCoordinate=function(t){var i=this.du.q();return null===i?null:this.du.X().$(t,i.Z)},t.prototype.coordinateToPrice=function(t){var i=this.du.q();return null===i?null:this.du.X().Ei(t,i.Z)},t.prototype.barsInLogicalRange=function(t){if(null===t)return null;var i=new zt(new Ot(t.from,t.to)).Mr(),n=this.du.Ki();if(n.Gt())return null;var e=n._a(i.ph(),1),s=n._a(i.gh(),-1),r=y(n.ar()),h=y(n.Yi());if(null!==e&&null!==s&&e.Bi>s.Bi)return{barsBefore:t.from-r,barsAfter:h-t.to};var o={barsBefore:null===e||e.Bi===r?t.from-r:e.Bi-r,barsAfter:null===s||s.Bi===h?h-t.to:h-s.Bi};return null!==e&&null!==s&&(o.from=e.F.Wh||e.F.Rh,o.to=s.F.Wh||s.F.Rh),o},t.prototype.setData=function(t){this.bw.gw(this.du,t)},t.prototype.update=function(t){this.bw.il(this.du,t)},t.prototype.setMarkers=function(t){var i=t.map(function(t){return f(f({},t),{time:Rn(t.time)})});this.du.rl(i)},t.prototype.applyOptions=function(t){var i=qn(t);this.du.ms(i)},t.prototype.options=function(){return C(this.du.O())},t.prototype.priceScale=function(){return this.mw.X(this.du.X().bs())},t.prototype.createPriceLine=function(t){var i=g(C(Hn),t),n=this.du.ul(i);return new Kn(n)},t.prototype.removePriceLine=function(t){this.du.ol(t.Mw())},t}(),jn=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return c(i,t),i.prototype.applyOptions=function(i){Tt(i),t.prototype.applyOptions.call(this,i)},i}(Xn),$n={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,drawTicks:!0,scaleMargins:{bottom:.1,top:.2}},Jn={width:0,height:0,layout:{backgroundColor:"#FFFFFF",textColor:"#191919",fontSize:11,fontFamily:"'Trebuchet MS', Roboto, Ubuntu, sans-serif"},crosshair:{vertLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},horzLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},mode:1},grid:{vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},overlayPriceScales:f({},$n),leftPriceScale:f(f({},$n),{visible:!1}),rightPriceScale:f(f({},$n),{visible:!0}),timeScale:{rightOffset:0,barSpacing:6,fixLeftEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0},watermark:{color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,text:"",horzAlign:"center",vertAlign:"center"},localization:{locale:navigator.language,dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:!0,mouseWheel:!0,pinch:!0}},Qn={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},te={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},ie={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4},ne={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4},ee={color:"#26a69a",base:0},se={title:"",lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}},re=function(){function t(t,i){this.cv=t,this.yw=i}return t.prototype.fn=function(){delete this.cv},t.prototype.bs=function(){return this.Zt().bs()},t.prototype.applyOptions=function(t){this.cv.ct().pf(this.yw,t)},t.prototype.options=function(){return this.Zt().O()},t.prototype.width=function(){return Ht(this.yw)?this.cv.$d("left"===this.yw?"left":"right"):0},t.prototype.Zt=function(){return y(this.cv.ct().gf(this.yw)).X},t}(),he=function(){function t(t){this.kw=new rt,this.Tr=new rt,this.ni=t,this.bl().me().sn(this.Nw.bind(this)),this.bl().pe().sn(this.xw.bind(this))}return t.prototype.fn=function(){this.bl().me().on(this),this.bl().pe().on(this),this.kw.fn(),delete this.ni},t.prototype.scrollPosition=function(){return this.bl().oe()},t.prototype.scrollToPosition=function(t,i){i?this.bl().be(t,1e3):this.bl().Rr(t)},t.prototype.scrollToRealTime=function(){this.bl().Me()},t.prototype.getVisibleRange=function(){var t,i,n=this.bl().Hr();return null===n?null:{from:null!==(t=n.from.Wh)&&void 0!==t?t:n.from.Rh,to:null!==(i=n.to.Wh)&&void 0!==i?i:n.to.Rh}},t.prototype.setVisibleRange=function(t){var i={from:Rn(t.from),to:Rn(t.to)},n=this.bl().$r(i);this.ni.$f(n)},t.prototype.getVisibleLogicalRange=function(){var t=this.bl().qr();return null===t?null:{from:t.ph(),to:t.gh()}},t.prototype.setVisibleLogicalRange=function(t){v(t.from<=t.to,"The from index cannot be after the to index."),this.ni.$f(t)},t.prototype.resetTimeScale=function(){this.ni.Of()},t.prototype.fitContent=function(){this.ni.ke()},t.prototype.timeToCoordinate=function(t){var i=Rn(t),n=this.ni.U(),e=n.Kr()._r(i.Rh,!1);return null===e?null:n.J(e)},t.prototype.coordinateToTime=function(t){var i,n=this.ni.U(),e=n.ne(t),s=n.Kr().cr(e);return null===s?null:null!==(i=s.Wh)&&void 0!==i?i:s.Rh},t.prototype.subscribeVisibleTimeRangeChange=function(t){this.kw.sn(t)},t.prototype.unsubscribeVisibleTimeRangeChange=function(t){this.kw.un(t)},t.prototype.subscribeVisibleLogicalRangeChange=function(t){this.Tr.sn(t)},t.prototype.unsubscribeVisibleLogicalRangeChange=function(t){this.Tr.un(t)},t.prototype.applyOptions=function(t){this.bl().ms(t)},t.prototype.options=function(){return C(this.bl().O())},t.prototype.bl=function(){return this.ni.U()},t.prototype.Nw=function(){this.kw.ln()&&this.kw.an(this.getVisibleRange())},t.prototype.xw=function(){this.Tr.ln()&&this.Tr.an(this.getVisibleLogicalRange())},t}();function oe(t){if(void 0!==t&&"custom"!==t.type){var i=t;void 0!==i.minMove&&void 0===i.precision&&(i.precision=function(t){if(t>=1)return 0;for(var i=0;i<8;i++){var n=Math.round(t);if(Math.abs(n-t)<1e-8)return i;t*=10}return i}(i.minMove))}}function ue(t){return function(t){if(S(t.handleScale)){var i=t.handleScale;t.handleScale={axisDoubleClickReset:i,axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(void 0!==t.handleScale&&S(t.handleScale.axisPressedMouseMove)){var n=t.handleScale.axisPressedMouseMove;t.handleScale.axisPressedMouseMove={time:n,price:n}}var e=t.handleScroll;S(e)&&(t.handleScroll={horzTouchDrag:e,vertTouchDrag:e,mouseWheel:e,pressedMouseMove:e})}(t),function(t){if(t.priceScale){t.leftPriceScale=t.leftPriceScale||{},t.rightPriceScale=t.rightPriceScale||{};var i=t.priceScale.position;delete t.priceScale.position,t.leftPriceScale=g(t.leftPriceScale,t.priceScale),t.rightPriceScale=g(t.rightPriceScale,t.priceScale),"left"===i&&(t.leftPriceScale.visible=!0,t.rightPriceScale.visible=!1),"right"===i&&(t.leftPriceScale.visible=!1,t.rightPriceScale.visible=!0),"none"===i&&(t.leftPriceScale.visible=!1,t.rightPriceScale.visible=!1),t.overlayPriceScales=t.overlayPriceScales||{},void 0!==t.priceScale.invertScale&&(t.overlayPriceScales.invertScale=t.priceScale.invertScale),void 0!==t.priceScale.scaleMargins&&(t.overlayPriceScales.scaleMargins=t.priceScale.scaleMargins)}}(t),t}var le=function(){function t(t,i){var n=this;this.Sw=new Yn,this.Dw=new Map,this.Tw=new Map,this.Cw=new rt,this.Ew=new rt;var e=void 0===i?C(Jn):g(C(Jn),ue(i));this.cv=new Bn(t,e),this.cv.Y_().sn(function(t){n.Cw.ln()&&n.Cw.an(n.Aw(t()))},this),this.cv.Df().sn(function(t){n.Ew.ln()&&n.Ew.an(n.Aw(t()))},this);var s=this.cv.ct();this.Lw=new he(s)}return t.prototype.remove=function(){this.cv.Y_().on(this),this.cv.Df().on(this),this.Lw.fn(),this.cv.fn(),delete this.cv,this.Dw.forEach(function(t,i){i.fn()}),this.Dw.clear(),this.Tw.clear(),this.Cw.fn(),this.Ew.fn(),this.Sw.fn(),delete this.Sw},t.prototype.resize=function(t,i,n){this.cv.Wd(t,i,n)},t.prototype.addAreaSeries=function(t){void 0===t&&(t={}),oe((t=qn(t)).priceFormat);var i=g(C(se),ne,t),n=this.cv.ct().Hf("Area",i),e=new Xn(n,this,this);return this.Dw.set(e,n),this.Tw.set(n,e),e},t.prototype.addBarSeries=function(t){void 0===t&&(t={}),oe((t=qn(t)).priceFormat);var i=g(C(se),te,t),n=this.cv.ct().Hf("Bar",i),e=new Xn(n,this,this);return this.Dw.set(e,n),this.Tw.set(n,e),e},t.prototype.addCandlestickSeries=function(t){void 0===t&&(t={}),Tt(t=qn(t)),oe(t.priceFormat);var i=g(C(se),Qn,t),n=this.cv.ct().Hf("Candlestick",i),e=new jn(n,this,this);return this.Dw.set(e,n),this.Tw.set(n,e),e},t.prototype.addHistogramSeries=function(t){void 0===t&&(t={}),oe((t=qn(t)).priceFormat);var i=g(C(se),ee,t),n=this.cv.ct().Hf("Histogram",i),e=new Xn(n,this,this);return this.Dw.set(e,n),this.Tw.set(n,e),e},t.prototype.addLineSeries=function(t){void 0===t&&(t={}),oe((t=qn(t)).priceFormat);var i=g(C(se),ie,t),n=this.cv.ct().Hf("Line",i),e=new Xn(n,this,this);return this.Dw.set(e,n),this.Tw.set(n,e),e},t.prototype.removeSeries=function(t){var i=t,n=d(this.Dw.get(i)),e=this.Sw.Kf(n),s=this.cv.ct();s.Kf(n);var r=e.vw;s.Uf(r.Bi,r.dw,r.qn,!0),r._w.forEach(function(t,i){i.il(t.B)}),s.jf(0),this.Dw.delete(i),this.Tw.delete(n)},t.prototype.gw=function(t,i){var n=this.Sw.uw(t,i),e=this.cv.ct(),s=n.vw;e.Uf(s.Bi,s.dw,s.qn,!0),s._w.forEach(function(t,i){i.il(t.B,!0)}),e.jf(0)},t.prototype.il=function(t,i){var n=this.Sw.lw(t,i),e=this.cv.ct(),s=n.vw;e.Uf(s.Bi,s.dw,s.qn,!1),s._w.forEach(function(t,i){i.il(t.B)}),e.jf(0)},t.prototype.subscribeClick=function(t){this.Cw.sn(t)},t.prototype.unsubscribeClick=function(t){this.Cw.un(t)},t.prototype.subscribeCrosshairMove=function(t){this.Ew.sn(t)},t.prototype.unsubscribeCrosshairMove=function(t){this.Ew.un(t)},t.prototype.priceScale=function(t){return t=t||this.cv.ct().Xf(),new re(this.cv,t)},t.prototype.timeScale=function(){return this.Lw},t.prototype.applyOptions=function(t){this.cv.ms(ue(t))},t.prototype.options=function(){return this.cv.O()},t.prototype.takeScreenshot=function(){return this.cv.Hd()},t.prototype.Bw=function(t){return d(this.Tw.get(t))},t.prototype.Aw=function(t){var i=this,n=new Map;t.iw.forEach(function(t,e){n.set(i.Bw(e),t)});var e=void 0===t.tw?void 0:this.Bw(t.tw);return{time:t.F&&(t.F.Wh||t.F.Rh),point:t.Qd,hoveredSeries:e,hoveredMarkerId:t.nw,seriesPrices:n}},t}();function ae(t,i){var n=y(M(t)?document.getElementById(t):t);return new le(n,i)}}}]);